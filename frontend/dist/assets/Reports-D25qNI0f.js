import{_ as D,u as w}from"./index-CUA5mSp8.js";import{b as i,p as e,q as _,t as o,C as h,x as y,y as v,A as R,F as P,D as b,s as S,g,f as d}from"./vendor-CFHPe_rb.js";const k={name:"AdminReports",setup(){return{authStore:w()}},data(){return{loading:!1,generatingReport:!1,error:null,allEmployees:[],orgStats:{},generatedReports:[],currentReport:null,departments:[],dashboardStartDate:"",dashboardEndDate:"",currentPeriod:"This Month",attendanceReportParams:{start_date:new Date().toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0],department:"",report_type:"summary"},leaveReportParams:{start_date:new Date().toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0],leave_type:"",status:"all"},payrollReportParams:{start_date:new Date().toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0],department:"",status:"all"},retryCount:0}},mounted(){this.initializeComponent()},methods:{initializeComponent(){if(!this.authStore.isAuthenticated){this.error="Please log in to access admin reports.";return}if(!this.authStore.isAdmin){this.error="You do not have permission to access this page.";return}this.fetchAdminData(),this.loadGeneratedReports()},async fetchAdminData(){this.loading=!0,this.error=null;try{const s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1).toISOString().split("T")[0],n=new Date(s.getFullYear(),s.getMonth()+1,0).toISOString().split("T")[0];this.dashboardStartDate=t,this.dashboardEndDate=n,this.currentPeriod="This Month";const p=await g.get("/api/admin/employees");this.allEmployees=p.data.data||p.data||[],this.departments=[...new Set(this.allEmployees.map(a=>a.department).filter(a=>a&&a.trim()!==""))].sort(),await this.fetchFilteredStats()}catch(s){console.error("Fetch error:",s),this.handleApiError(s)}finally{this.loading=!1}},async fetchFilteredStats(){this.loading=!0,this.error=null;try{const s={start_date:this.dashboardStartDate,end_date:this.dashboardEndDate},t=await g.get("/api/admin/reports/stats",{params:s});this.orgStats=t.data||{},this.attendanceReportParams.start_date=this.dashboardStartDate,this.attendanceReportParams.end_date=this.dashboardEndDate,this.leaveReportParams.start_date=this.dashboardStartDate,this.leaveReportParams.end_date=this.dashboardEndDate,this.payrollReportParams.start_date=this.dashboardStartDate,this.payrollReportParams.end_date=this.dashboardEndDate,this.updateCurrentPeriodDisplay()}catch(s){console.error("Fetch error:",s),this.handleApiError(s)}finally{this.loading=!1}},updateCurrentPeriodDisplay(){const s=new Date(this.dashboardStartDate),t=new Date(this.dashboardEndDate),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=n[s.getMonth()],a=n[t.getMonth()];s.getFullYear()===t.getFullYear()&&p===a?this.currentPeriod=`${p} ${s.getFullYear()}`:this.currentPeriod=`${p} ${s.getDate()} - ${a} ${t.getDate()}, ${t.getFullYear()}`},onDateChange(){this.dashboardEndDate<this.dashboardStartDate&&(this.dashboardEndDate=this.dashboardStartDate)},resetDateFilter(){const s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1).toISOString().split("T")[0],n=new Date(s.getFullYear(),s.getMonth()+1,0).toISOString().split("T")[0];this.dashboardStartDate=t,this.dashboardEndDate=n,this.fetchFilteredStats()},async generateAttendanceReport(){this.generatingReport=!0;try{const s={start_date:this.attendanceReportParams.start_date,end_date:this.attendanceReportParams.end_date,report_type:this.attendanceReportParams.report_type||"summary"};this.attendanceReportParams.department&&this.attendanceReportParams.department.trim()!==""&&(s.department=this.attendanceReportParams.department),s.start_date&&(s.start_date=this.ensureDateFormat(s.start_date)),s.end_date&&(s.end_date=this.ensureDateFormat(s.end_date));const t=await g.post("/api/admin/reports/generate/attendance",s);if(t.data.success)this.currentReport={type:"attendance",title:"Attendance Report",data:t.data.data,period:t.data.data.period,originalParams:{...s}},this.$notify({type:"success",title:"Success",text:"Attendance report generated successfully!"});else throw new Error(t.data.message||"Failed to generate report")}catch(s){console.error("Error generating attendance report:",s),this.handleApiError(s)}finally{this.generatingReport=!1}},async generateLeaveReport(){this.generatingReport=!0;try{const s={...this.leaveReportParams,leave_type:this.leaveReportParams.leave_type||"",status:this.leaveReportParams.status||"all"};s.start_date&&(s.start_date=this.ensureDateFormat(s.start_date)),s.end_date&&(s.end_date=this.ensureDateFormat(s.end_date));const t=await g.post("/api/admin/reports/generate/leave",s);if(t.data.success)this.currentReport={type:"leave",title:"Leave Report",data:t.data.data,period:t.data.data.period,originalParams:{...s}},this.$notify({type:"success",title:"Success",text:"Leave report generated successfully!"});else throw new Error(t.data.message||"Failed to generate report")}catch(s){console.error("Error generating leave report:",s),this.handleApiError(s)}finally{this.generatingReport=!1}},async generatePayrollReport(){this.generatingReport=!0;try{const s={start_date:this.payrollReportParams.start_date,end_date:this.payrollReportParams.end_date,status:this.payrollReportParams.status||"all"};this.payrollReportParams.department&&this.payrollReportParams.department.trim()!==""&&(s.department=this.payrollReportParams.department),s.start_date&&(s.start_date=this.ensureDateFormat(s.start_date)),s.end_date&&(s.end_date=this.ensureDateFormat(s.end_date));const t=await g.post("/api/admin/reports/generate/payroll",s);if(t.data.success)this.currentReport={type:"payroll",title:"Payroll Report",data:t.data.data,period:t.data.data.period,originalParams:{...s}},this.$notify({type:"success",title:"Success",text:"Payroll report generated successfully!"});else throw new Error(t.data.message||"Failed to generate report")}catch(s){console.error("Error generating payroll report:",s),this.handleApiError(s)}finally{this.generatingReport=!1}},async downloadReport(s){try{let t,n;if(s.period&&s.period.includes(" to ")){const[m,r]=s.period.split(" to ");t=this.formatDateForBackend(m),n=this.formatDateForBackend(r)}else{switch(s.type){case"attendance":t=this.attendanceReportParams.start_date,n=this.attendanceReportParams.end_date;break;case"leave":t=this.leaveReportParams.start_date,n=this.leaveReportParams.end_date;break;case"payroll":t=this.payrollReportParams.start_date,n=this.payrollReportParams.end_date;break;default:const m=new Date().toISOString().split("T")[0];t=m,n=m}console.log("Dates from current params:",{startDate:t,endDate:n})}const p={format:"pdf",start_date:t,end_date:n,...this.getAdditionalDownloadParams(s)},a=await g.post(`/api/admin/reports/download/${s.type}`,p,{responseType:"blob",headers:{"Content-Type":"application/json"}});if(a.data.size===0)throw console.error("Downloaded file is empty!"),new Error("Downloaded file is empty");const l=new Blob([a.data],{type:"application/pdf"}),c=window.URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.setAttribute("download",`${s.type}_report_${new Date().getTime()}.pdf`),document.body.appendChild(u),u.click(),u.remove(),window.URL.revokeObjectURL(c),this.$notify({type:"success",title:"Success",text:"Report download started!"})}catch(t){console.error("=== DOWNLOAD ERROR ==="),console.error("Error details:",t),console.error("Error response:",t.response),t.response&&(console.error("Error status:",t.response.status),console.error("Error data:",t.response.data)),console.error("====================="),this.handleApiError(t)}},async exportToExcel(s){try{let t,n;if(s.period&&s.period.includes(" to ")){const[u,m]=s.period.split(" to ");t=this.formatDateForBackend(u),n=this.formatDateForBackend(m),console.log("Dates converted for backend:",{startDate:t,endDate:n})}else switch(s.type){case"attendance":t=this.attendanceReportParams.start_date,n=this.attendanceReportParams.end_date;break;case"leave":t=this.leaveReportParams.start_date,n=this.leaveReportParams.end_date;break;case"payroll":t=this.payrollReportParams.start_date,n=this.payrollReportParams.end_date;break;default:const u=new Date().toISOString().split("T")[0];t=u,n=u}const p={format:"csv",start_date:t,end_date:n,...this.getAdditionalDownloadParams(s)},a=await g.post(`/api/admin/reports/download/${s.type}`,p,{responseType:"blob",headers:{"Content-Type":"application/json"}});if(a.data.size===0)throw console.error("Exported file is empty!"),new Error("Exported file is empty");const l=window.URL.createObjectURL(new Blob([a.data])),c=document.createElement("a");c.href=l,c.setAttribute("download",`${s.type}_report_${new Date().getTime()}.csv`),document.body.appendChild(c),c.click(),c.remove(),console.log("Export completed successfully"),this.$notify({type:"success",title:"Success",text:"Report exported to CSV!"})}catch(t){console.error("=== EXPORT ERROR ==="),console.error("Error details:",t),console.error("Error response:",t.response),console.error("==================="),this.handleApiError(t)}},formatDateForBackend(s){const t=new Date(s);if(isNaN(t.getTime()))return console.warn("Invalid date string:",s),new Date().toISOString().split("T")[0];const n=t.getFullYear(),p=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${n}-${p}-${a}`},ensureDateFormat(s){return/^\d{4}-\d{2}-\d{2}$/.test(s)?s:this.formatDateForBackend(s)},getAdditionalDownloadParams(s){const t={};switch(s.type){case"attendance":this.attendanceReportParams.department&&this.attendanceReportParams.department.trim()!==""&&(t.department=this.attendanceReportParams.department),t.report_type=this.attendanceReportParams.report_type||"summary";break;case"leave":this.leaveReportParams.leave_type&&(t.leave_type=this.leaveReportParams.leave_type),this.leaveReportParams.status&&this.leaveReportParams.status!=="all"&&(t.status=this.leaveReportParams.status);break;case"payroll":this.payrollReportParams.department&&this.payrollReportParams.department.trim()!==""&&(t.department=this.payrollReportParams.department),this.payrollReportParams.status&&this.payrollReportParams.status!=="all"&&(t.status=this.payrollReportParams.status);break}return console.log("Additional parameters for download:",t),t},viewReport(s){this.currentReport=s},async loadGeneratedReports(){try{const s=await g.get("/api/admin/reports/generated-reports");this.generatedReports=s.data||[]}catch(s){console.error("Error loading generated reports:",s)}},getReportIcon(s){return{attendance:"ðŸ“Š",leave:"ðŸ“‹",payroll:"ðŸ’°"}[s]||"ðŸ“„"},formatDate(s){return s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"},retryFetch(){this.retryCount++,this.retryCount<=3?this.fetchAdminData():this.error="Max retries exceeded. Check your network or server."},handleApiError(s){var n,p,a,l,c,u,m;let t="An unexpected error occurred.";if(s.code==="ERR_NETWORK"||s.message.includes("Network Error"))t="Network error: Please check your connection and try again.";else if(((n=s.response)==null?void 0:n.status)===401)t="Your session has expired. Please log in again.",this.authStore.clearAuth(),this.$router.push({name:"login"});else if(((p=s.response)==null?void 0:p.status)===403)t="You do not have permission to perform this action.";else if(((a=s.response)==null?void 0:a.status)===404)t="Report generation endpoint not found. Please check the API routes.";else if(((l=s.response)==null?void 0:l.status)===422){if(t="Invalid report parameters. Please check your inputs.",s.response.data.errors){const r=Object.values(s.response.data.errors).flat();t+=" Details: "+r.join(", ")}}else((c=s.response)==null?void 0:c.status)===500?t="Server error: Please try again later.":t=((m=(u=s.response)==null?void 0:u.data)==null?void 0:m.message)||s.message||t;this.error=t,this.$notify({type:"error",title:"Error",text:t})}}},E={class:"reports-management"},A={class:"page-header"},T={class:"header-actions"},F=["disabled"],C=["disabled"],x=["disabled"],O={key:0,class:"error-message"},L={key:1,class:"error-message"},G={key:2,class:"loading"},I={key:3,class:"error-message"},M={key:4,class:"reports-dashboard"},U={class:"stats-grid"},V={class:"stat-card"},N={class:"stat-content"},Y={class:"stat-value"},B={class:"stat-card"},j={class:"stat-content"},z={class:"stat-value"},K={class:"stat-card"},W={class:"stat-content"},q={class:"stat-value"},J={class:"stat-card"},X={class:"stat-content"},H={class:"stat-value"},Q={class:"report-generation-section"},Z={class:"generation-options"},$={class:"generation-option"},tt={class:"date-inputs"},et={class:"input-group"},st={class:"input-group"},at={class:"filter-group"},rt=["value"],ot=["disabled"],nt={class:"generation-option"},lt={class:"date-inputs"},it={class:"input-group"},dt={class:"input-group"},pt={class:"filter-group"},ut={class:"filter-group"},ct=["disabled"],mt={class:"generation-option"},yt={class:"date-inputs"},gt={class:"input-group"},vt={class:"input-group"},ht={class:"filter-group"},Rt=["value"],_t={class:"filter-group"},Pt=["disabled"],bt={key:0,class:"generated-reports"},ft={class:"reports-list"},Dt={class:"report-icon"},wt={class:"report-info"},St={class:"report-period"},kt={class:"report-date"},Et={class:"report-actions"},At=["onClick"],Tt=["onClick"],Ft={key:1,class:"report-preview-section"},Ct={class:"preview-actions"},xt={class:"preview-content"},Ot={key:0},Lt={class:"report-stats"},Gt={class:"report-stat"},It={class:"stat-value"},Mt={class:"report-stat"},Ut={class:"stat-value"},Vt={class:"report-stat"},Nt={class:"stat-value"},Yt={class:"report-stat"},Bt={class:"stat-value"},jt={key:1},zt={class:"report-stats"},Kt={class:"report-stat"},Wt={class:"stat-value"},qt={class:"report-stat"},Jt={class:"stat-value"},Xt={class:"report-stat"},Ht={class:"stat-value"},Qt={class:"report-stat"},Zt={class:"stat-value"},$t={key:2},te={class:"report-stats"},ee={class:"report-stat"},se={class:"stat-value"},ae={class:"report-stat"},re={class:"stat-value"},oe={class:"report-stat"},ne={class:"stat-value"},le={class:"report-stat"},ie={class:"stat-value"},de={class:"payroll-details-table"};function pe(s,t,n,p,a,l){var c,u,m;return d(),i("div",E,[e("div",A,[t[24]||(t[24]=e("h1",null,"Organization Reports",-1)),e("div",T,[e("button",{onClick:t[0]||(t[0]=(...r)=>l.generateAttendanceReport&&l.generateAttendanceReport(...r)),class:"btn-primary",disabled:a.generatingReport},[t[21]||(t[21]=e("span",null,"ðŸ“Š",-1)),_(" "+o(a.generatingReport?"Generating...":"Generate Attendance Report"),1)],8,F),e("button",{onClick:t[1]||(t[1]=(...r)=>l.generateLeaveReport&&l.generateLeaveReport(...r)),class:"btn-secondary",disabled:a.generatingReport},[t[22]||(t[22]=e("span",null,"ðŸ“‹",-1)),_(" "+o(a.generatingReport?"Generating...":"Generate Leave Report"),1)],8,C),e("button",{onClick:t[2]||(t[2]=(...r)=>l.generatePayrollReport&&l.generatePayrollReport(...r)),class:"btn-tertiary",disabled:a.generatingReport},[t[23]||(t[23]=e("span",null,"ðŸ’°",-1)),_(" "+o(a.generatingReport?"Generating...":"Generate Payroll Report"),1)],8,x)])]),p.authStore.isAuthenticated?p.authStore.isAdmin?a.loading?(d(),i("div",G,[...t[25]||(t[25]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading organization reports...",-1)])])):a.error?(d(),i("div",I,[_(o(a.error)+" ",1),e("button",{onClick:t[3]||(t[3]=(...r)=>l.retryFetch&&l.retryFetch(...r)),class:"btn-primary",style:{"margin-top":"1rem"}},"Retry")])):(d(),i("div",M,[t[79]||(t[79]=e("div",{class:"admin-info"},[e("h2",null,"ðŸ¢ Organization Overview"),e("p",{class:"admin-subtitle"},"Company-wide performance metrics and reports")],-1)),e("div",U,[e("div",V,[t[28]||(t[28]=e("div",{class:"stat-icon"},"ðŸ‘¥",-1)),e("div",N,[t[26]||(t[26]=e("h3",null,"Total Employees",-1)),e("p",Y,o(a.orgStats.total_employees||0),1),t[27]||(t[27]=e("p",{class:"stat-label"},"All Staff",-1))])]),e("div",B,[t[31]||(t[31]=e("div",{class:"stat-icon"},"âœ…",-1)),e("div",j,[t[29]||(t[29]=e("h3",null,"Present Today",-1)),e("p",z,o(a.orgStats.present_today||0),1),t[30]||(t[30]=e("p",{class:"stat-label"},"Active Employees",-1))])]),e("div",K,[t[34]||(t[34]=e("div",{class:"stat-icon"},"ðŸ“…",-1)),e("div",W,[t[32]||(t[32]=e("h3",null,"Pending Leaves",-1)),e("p",q,o(a.orgStats.pending_leaves||0),1),t[33]||(t[33]=e("p",{class:"stat-label"},"Company-Wide",-1))])]),e("div",J,[t[37]||(t[37]=e("div",{class:"stat-icon"},"ðŸ“Š",-1)),e("div",X,[t[35]||(t[35]=e("h3",null,"Avg. Attendance",-1)),e("p",H,o(a.orgStats.avg_attendance||0)+"%",1),t[36]||(t[36]=e("p",{class:"stat-label"},"Selected Period",-1))])])]),e("div",Q,[t[60]||(t[60]=e("h2",null,"Generate Reports",-1)),e("div",Z,[e("div",$,[t[42]||(t[42]=e("h3",null,"Attendance Report",-1)),t[43]||(t[43]=e("p",null,"Generate comprehensive attendance report for selected period",-1)),e("div",tt,[e("div",et,[t[38]||(t[38]=e("label",null,"Start Date:",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=r=>a.attendanceReportParams.start_date=r),class:"date-input"},null,512),[[v,a.attendanceReportParams.start_date]])]),e("div",st,[t[39]||(t[39]=e("label",null,"End Date:",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=r=>a.attendanceReportParams.end_date=r),class:"date-input"},null,512),[[v,a.attendanceReportParams.end_date]])])]),e("div",at,[t[41]||(t[41]=e("label",null,"Department:",-1)),y(e("select",{"onUpdate:modelValue":t[6]||(t[6]=r=>a.attendanceReportParams.department=r),class:"filter-select"},[t[40]||(t[40]=e("option",{value:""},"All Departments",-1)),(d(!0),i(P,null,b(a.departments,r=>(d(),i("option",{key:r,value:r},o(r),9,rt))),128))],512),[[R,a.attendanceReportParams.department]])]),e("button",{onClick:t[7]||(t[7]=(...r)=>l.generateAttendanceReport&&l.generateAttendanceReport(...r)),class:"btn-primary",disabled:a.generatingReport},o(a.generatingReport?"Generating...":"Generate Report"),9,ot)]),e("div",nt,[t[50]||(t[50]=e("h3",null,"Leave Report",-1)),t[51]||(t[51]=e("p",null,"Generate leave utilization and approval reports",-1)),e("div",lt,[e("div",it,[t[44]||(t[44]=e("label",null,"Start Date:",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=r=>a.leaveReportParams.start_date=r),class:"date-input"},null,512),[[v,a.leaveReportParams.start_date]])]),e("div",dt,[t[45]||(t[45]=e("label",null,"End Date:",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=r=>a.leaveReportParams.end_date=r),class:"date-input"},null,512),[[v,a.leaveReportParams.end_date]])])]),e("div",pt,[t[47]||(t[47]=e("label",null,"Leave Type:",-1)),y(e("select",{"onUpdate:modelValue":t[10]||(t[10]=r=>a.leaveReportParams.leave_type=r),class:"filter-select"},[...t[46]||(t[46]=[S('<option value="">All Types</option><option value="vacation">Vacation</option><option value="sick">Sick Leave</option><option value="personal">Personal</option><option value="maternity">Maternity</option><option value="paternity">Paternity</option>',6)])],512),[[R,a.leaveReportParams.leave_type]])]),e("div",ut,[t[49]||(t[49]=e("label",null,"Status:",-1)),y(e("select",{"onUpdate:modelValue":t[11]||(t[11]=r=>a.leaveReportParams.status=r),class:"filter-select"},[...t[48]||(t[48]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)])],512),[[R,a.leaveReportParams.status]])]),e("button",{onClick:t[12]||(t[12]=(...r)=>l.generateLeaveReport&&l.generateLeaveReport(...r)),class:"btn-secondary",disabled:a.generatingReport},o(a.generatingReport?"Generating...":"Generate Report"),9,ct)]),e("div",mt,[t[58]||(t[58]=e("h3",null,"Payroll Report",-1)),t[59]||(t[59]=e("p",null,"Generate payroll summary and tax reports",-1)),e("div",yt,[e("div",gt,[t[52]||(t[52]=e("label",null,"Start Date:",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[13]||(t[13]=r=>a.payrollReportParams.start_date=r),class:"date-input"},null,512),[[v,a.payrollReportParams.start_date]])]),e("div",vt,[t[53]||(t[53]=e("label",null,"End Date:",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[14]||(t[14]=r=>a.payrollReportParams.end_date=r),class:"date-input"},null,512),[[v,a.payrollReportParams.end_date]])])]),e("div",ht,[t[55]||(t[55]=e("label",null,"Department:",-1)),y(e("select",{"onUpdate:modelValue":t[15]||(t[15]=r=>a.payrollReportParams.department=r),class:"filter-select"},[t[54]||(t[54]=e("option",{value:""},"All Departments",-1)),(d(!0),i(P,null,b(a.departments,r=>(d(),i("option",{key:r,value:r},o(r),9,Rt))),128))],512),[[R,a.payrollReportParams.department]])]),e("div",_t,[t[57]||(t[57]=e("label",null,"Status:",-1)),y(e("select",{"onUpdate:modelValue":t[16]||(t[16]=r=>a.payrollReportParams.status=r),class:"filter-select"},[...t[56]||(t[56]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"pending"},"Pending",-1)])],512),[[R,a.payrollReportParams.status]])]),e("button",{onClick:t[17]||(t[17]=(...r)=>l.generatePayrollReport&&l.generatePayrollReport(...r)),class:"btn-tertiary",disabled:a.generatingReport},o(a.generatingReport?"Generating...":"Generate Report"),9,Pt)])])]),a.generatedReports.length>0?(d(),i("div",bt,[t[61]||(t[61]=e("h2",null,"Recently Generated Reports",-1)),e("div",ft,[(d(!0),i(P,null,b(a.generatedReports,r=>(d(),i("div",{key:r.id,class:"report-item"},[e("div",Dt,o(l.getReportIcon(r.type)),1),e("div",wt,[e("h4",null,o(r.title),1),e("p",St,o(r.period),1),e("p",kt,"Generated: "+o(l.formatDate(r.generated_at)),1)]),e("div",Et,[e("button",{onClick:f=>l.downloadReport(r),class:"btn-download"},"ðŸ“¥ Download",8,At),e("button",{onClick:f=>l.viewReport(r),class:"btn-view"},"ðŸ‘ï¸ View",8,Tt)])]))),128))])])):h("",!0),a.currentReport?(d(),i("div",Ft,[e("h2",null,"Report Preview: "+o(a.currentReport.title),1),e("div",Ct,[e("button",{onClick:t[18]||(t[18]=r=>l.downloadReport(a.currentReport)),class:"btn-primary"},"Download PDF"),e("button",{onClick:t[19]||(t[19]=r=>l.exportToExcel(a.currentReport)),class:"btn-secondary"},"Export to Excel"),e("button",{onClick:t[20]||(t[20]=r=>a.currentReport=null),class:"btn-tertiary"},"Close Preview")]),e("div",xt,[a.currentReport.type==="attendance"&&a.currentReport.data?(d(),i("div",Ot,[t[66]||(t[66]=e("h3",null,"Attendance Summary",-1)),e("div",Lt,[e("div",Gt,[t[62]||(t[62]=e("span",{class:"stat-label"},"Total Employees:",-1)),e("span",It,o(a.currentReport.data.total_employees||0),1)]),e("div",Mt,[t[63]||(t[63]=e("span",{class:"stat-label"},"Average Attendance:",-1)),e("span",Ut,o(a.currentReport.data.attendance_rate||0)+"%",1)]),e("div",Vt,[t[64]||(t[64]=e("span",{class:"stat-label"},"Total Present Days:",-1)),e("span",Nt,o(((c=a.currentReport.data.attendance_summary)==null?void 0:c.present)||0),1)]),e("div",Yt,[t[65]||(t[65]=e("span",{class:"stat-label"},"Working Days:",-1)),e("span",Bt,o(a.currentReport.data.working_days||0),1)])])])):h("",!0),a.currentReport.type==="leave"&&a.currentReport.data?(d(),i("div",jt,[t[71]||(t[71]=e("h3",null,"Leave Summary",-1)),e("div",zt,[e("div",Kt,[t[67]||(t[67]=e("span",{class:"stat-label"},"Total Leave Requests:",-1)),e("span",Wt,o(a.currentReport.data.total_leave_requests||0),1)]),e("div",qt,[t[68]||(t[68]=e("span",{class:"stat-label"},"Approved Leaves:",-1)),e("span",Jt,o(((u=a.currentReport.data.status_breakdown)==null?void 0:u.approved)||0),1)]),e("div",Xt,[t[69]||(t[69]=e("span",{class:"stat-label"},"Pending Leaves:",-1)),e("span",Ht,o(((m=a.currentReport.data.status_breakdown)==null?void 0:m.pending)||0),1)]),e("div",Qt,[t[70]||(t[70]=e("span",{class:"stat-label"},"Approval Rate:",-1)),e("span",Zt,o(a.currentReport.data.approval_rate||0)+"%",1)])])])):h("",!0),a.currentReport.type==="payroll"&&a.currentReport.data?(d(),i("div",$t,[t[77]||(t[77]=e("h3",null,"Payroll Summary",-1)),e("div",te,[e("div",ee,[t[72]||(t[72]=e("span",{class:"stat-label"},"Total Payroll:",-1)),e("span",se,"K"+o(a.currentReport.data.total_net_salary||0),1)]),e("div",ae,[t[73]||(t[73]=e("span",{class:"stat-label"},"Employees Processed:",-1)),e("span",re,o(a.currentReport.data.processed_employees||0),1)]),e("div",oe,[t[74]||(t[74]=e("span",{class:"stat-label"},"Average Salary:",-1)),e("span",ne,"K"+o(a.currentReport.data.average_net_salary||0),1)]),e("div",le,[t[75]||(t[75]=e("span",{class:"stat-label"},"Total Tax:",-1)),e("span",ie,"K"+o(a.currentReport.data.total_tax_amount||0),1)])]),t[78]||(t[78]=e("h4",{style:{"margin-top":"2rem",color:"var(--color-primary)"}},"Payslip Details",-1)),e("div",de,[e("table",null,[t[76]||(t[76]=e("thead",null,[e("tr",null,[e("th",null,"Employee Name"),e("th",null,"Gross Salary"),e("th",null,"Deductions"),e("th",null,"Net Salary"),e("th",null,"Tax Amount"),e("th",null,"Pay Period")])],-1)),e("tbody",null,[(d(!0),i(P,null,b(a.currentReport.data.payslip_details,r=>(d(),i("tr",{key:r.employee_id},[e("td",null,o(r.employee_name),1),e("td",null,"K"+o(r.gross_salary),1),e("td",null,"K"+o(r.deductions),1),e("td",null,"K"+o(r.net_salary),1),e("td",null,"K"+o(r.tax_amount),1),e("td",null,o(r.pay_period),1)]))),128))])])])])):h("",!0)])])):h("",!0)])):(d(),i("div",L," You don't have permission to access this page. ")):(d(),i("div",O," Please log in to access admin reports. "))])}const me=D(k,[["render",pe]]);export{me as default};
