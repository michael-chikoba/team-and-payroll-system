import{g as v,G as H,w as j,K as k,f as d,b as u,C as p,v as X,p as e,t as r,z as f,a as P,q as w,x as m,y as g,F as J,D as Z,e as $,B as ss,E as es}from"./vendor-CFHPe_rb.js";import{_ as K}from"./index-cgHGa_Rg.js";const ts={name:"PayslipDetailModal",props:{visible:{type:Boolean,required:!0},employeeId:{type:Number,required:!1},payrollPeriod:{type:String,required:!1}},data(){return{payslip:null,loading:!1,error:null,isPreview:!1}},watch:{visible(t){t&&this.employeeId&&this.payrollPeriod&&this.fetchPayslipDetails()}},methods:{async fetchPayslipDetails(){var t,s;this.loading=!0,this.error=null;try{const a=await v.get(`/api/admin/payroll/employee/${this.employeeId}/payslip`,{params:{payroll_period:this.payrollPeriod}});this.payslip=a.data.data,this.isPreview=a.data.is_preview||!1}catch(a){console.error("Failed to load payslip:",a),this.error=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to load payslip details"}finally{this.loading=!1}},retry(){this.fetchPayslipDetails()},close(){this.$emit("close"),setTimeout(()=>{this.payslip=null,this.error=null,this.isPreview=!1},300)},downloadPdf(){var t;(t=this.payslip)!=null&&t.id&&window.open(`/api/payslips/${this.payslip.id}/download`,"_blank")},formatCurrency(t){return new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW",minimumFractionDigits:2}).format(t||0)},formatDate(t){return t?new Date(t).toLocaleDateString("en-ZM",{year:"numeric",month:"long",day:"numeric"}):"â€”"},formatPeriod(t){if(!t)return"â€”";const[s,a]=t.split("-");return`${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(a)-1]} ${s}`},getStatusIcon(t){return{pending:"â³",paid:"âœ“",draft:"ðŸ“",generated:"ðŸ“„"}[t]||"â€¢"},getStatusText(t){return t?t.charAt(0).toUpperCase()+t.slice(1):"Unknown"}}},ls={class:"modal-container"},ns={class:"modal-header"},os={key:0,class:"modal-loading"},as={key:1,class:"modal-error"},rs={key:2,class:"modal-body"},is={key:0,class:"preview-badge"},ds={class:"section employee-section"},us={class:"info-grid"},cs={class:"info-item"},ps={class:"value"},ms={class:"info-item"},ys={class:"value"},hs={class:"info-item"},gs={class:"value"},vs={class:"info-item"},fs={class:"value"},_s={class:"section period-section"},bs={class:"info-grid"},ws={class:"info-item"},Ps={class:"value"},js={class:"info-item"},ks={class:"value"},Cs={class:"info-item"},Es={class:"value"},As={class:"info-item"},Ds={class:"value"},Ss={class:"section earnings-section"},Ms={class:"calculation-table"},Ns={class:"calc-row"},Ts={class:"calc-value"},Is={class:"calc-row indent"},Bs={class:"calc-value"},Us={class:"calc-row indent"},xs={class:"calc-value"},Vs={class:"calc-row indent"},Fs={class:"calc-value"},Ls={key:0,class:"calc-row subsection"},Os={key:1,class:"calc-row indent"},Rs={class:"calc-label"},Ws={class:"calc-value"},qs={key:2,class:"calc-row"},Ys={class:"calc-value"},Gs={class:"calc-row total"},Qs={class:"calc-value"},zs={class:"section deductions-section"},Js={class:"calculation-table"},Zs={class:"calc-row"},Ks={class:"calc-value negative"},Hs={class:"calc-row"},Xs={class:"calc-value negative"},$s={class:"calc-row"},se={class:"calc-value negative"},ee={key:0,class:"calc-row"},te={class:"calc-value negative"},le={class:"calc-row total"},ne={class:"calc-value negative"},oe={class:"section summary-section"},ae={class:"net-pay-card"},re={class:"summary-row"},ie={class:"summary-value"},de={class:"summary-row"},ue={class:"summary-value negative"},ce={class:"summary-row net-pay-row"},pe={class:"summary-value net-pay"},me={class:"section status-section"},ye={class:"status-icon"},he={class:"status-text"},ge={class:"modal-footer"};function ve(t,s,a,i,n,l){return d(),H(k,{name:"modal-fade"},{default:j(()=>{var y,h,o,c,b,C,E,A,D,S,M,N,T,I,B,U,x,V,F,L,O,R,W,q,Y,G,Q,z;return[a.visible?(d(),u("div",{key:0,class:"modal-overlay",onClick:s[4]||(s[4]=X((..._)=>l.close&&l.close(..._),["self"]))},[e("div",ls,[e("div",ns,[e("h2",null,r(n.isPreview?"Payslip Preview":"Payslip Details"),1),e("button",{onClick:s[0]||(s[0]=(..._)=>l.close&&l.close(..._)),class:"close-btn"},"Ã—")]),n.loading?(d(),u("div",os,[...s[5]||(s[5]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading payslip details...",-1)])])):n.error?(d(),u("div",as,[e("p",null,r(n.error),1),e("button",{onClick:s[1]||(s[1]=(..._)=>l.retry&&l.retry(..._)),class:"retry-btn"},"Retry")])):n.payslip?(d(),u("div",rs,[n.isPreview?(d(),u("div",is," âš ï¸ This is a preview. Process payroll to finalize. ")):p("",!0),e("section",ds,[s[10]||(s[10]=e("h3",null,"Employee Information",-1)),e("div",us,[e("div",cs,[s[6]||(s[6]=e("span",{class:"label"},"Name:",-1)),e("span",ps,r((y=n.payslip.employee)==null?void 0:y.name),1)]),e("div",ms,[s[7]||(s[7]=e("span",{class:"label"},"ID:",-1)),e("span",ys,r((h=n.payslip.employee)==null?void 0:h.employee_id),1)]),e("div",hs,[s[8]||(s[8]=e("span",{class:"label"},"Department:",-1)),e("span",gs,r((o=n.payslip.employee)==null?void 0:o.department),1)]),e("div",vs,[s[9]||(s[9]=e("span",{class:"label"},"Position:",-1)),e("span",fs,r((c=n.payslip.employee)==null?void 0:c.position),1)])])]),e("section",_s,[s[15]||(s[15]=e("h3",null,"Pay Period",-1)),e("div",bs,[e("div",ws,[s[11]||(s[11]=e("span",{class:"label"},"Period:",-1)),e("span",Ps,r(l.formatPeriod((b=n.payslip.period)==null?void 0:b.payroll_period)),1)]),e("div",js,[s[12]||(s[12]=e("span",{class:"label"},"Start Date:",-1)),e("span",ks,r(l.formatDate((C=n.payslip.period)==null?void 0:C.start_date)),1)]),e("div",Cs,[s[13]||(s[13]=e("span",{class:"label"},"End Date:",-1)),e("span",Es,r(l.formatDate((E=n.payslip.period)==null?void 0:E.end_date)),1)]),e("div",As,[s[14]||(s[14]=e("span",{class:"label"},"Payment Date:",-1)),e("span",Ds,r(l.formatDate((A=n.payslip.period)==null?void 0:A.payment_date)),1)])])]),e("section",Ss,[s[24]||(s[24]=e("h3",null,"Earnings Breakdown",-1)),e("div",Ms,[e("div",Ns,[s[16]||(s[16]=e("span",{class:"calc-label"},"Basic Salary",-1)),e("span",Ts,r(l.formatCurrency((D=n.payslip.earnings)==null?void 0:D.basic_salary)),1)]),s[23]||(s[23]=e("div",{class:"calc-row subsection"},[e("span",{class:"calc-label"},"Allowances:"),e("span",{class:"calc-value"})],-1)),e("div",Is,[s[17]||(s[17]=e("span",{class:"calc-label"},"Housing Allowance (25%)",-1)),e("span",Bs,r(l.formatCurrency((S=n.payslip.earnings)==null?void 0:S.house_allowance)),1)]),e("div",Us,[s[18]||(s[18]=e("span",{class:"calc-label"},"Transport Allowance",-1)),e("span",xs,r(l.formatCurrency((M=n.payslip.earnings)==null?void 0:M.transport_allowance)),1)]),e("div",Vs,[s[19]||(s[19]=e("span",{class:"calc-label"},"Lunch Allowance",-1)),e("span",Fs,r(l.formatCurrency((N=n.payslip.earnings)==null?void 0:N.lunch_allowance)),1)]),((T=n.payslip.earnings)==null?void 0:T.overtime_hours)>0?(d(),u("div",Ls,[...s[20]||(s[20]=[e("span",{class:"calc-label"},"Overtime:",-1),e("span",{class:"calc-value"},null,-1)])])):p("",!0),((I=n.payslip.earnings)==null?void 0:I.overtime_hours)>0?(d(),u("div",Os,[e("span",Rs,r(n.payslip.earnings.overtime_hours)+"hrs @ "+r(l.formatCurrency(n.payslip.earnings.overtime_rate))+"/hr",1),e("span",Ws,r(l.formatCurrency((B=n.payslip.earnings)==null?void 0:B.overtime_pay)),1)])):p("",!0),((U=n.payslip.earnings)==null?void 0:U.bonuses)>0?(d(),u("div",qs,[s[21]||(s[21]=e("span",{class:"calc-label"},"Bonuses",-1)),e("span",Ys,r(l.formatCurrency((x=n.payslip.earnings)==null?void 0:x.bonuses)),1)])):p("",!0),e("div",Gs,[s[22]||(s[22]=e("span",{class:"calc-label"},"Gross Salary",-1)),e("span",Qs,r(l.formatCurrency((V=n.payslip.earnings)==null?void 0:V.gross_salary)),1)])])]),e("section",zs,[s[30]||(s[30]=e("h3",null,"Deductions Breakdown",-1)),e("div",Js,[e("div",Zs,[s[25]||(s[25]=e("span",{class:"calc-label"},"PAYE",-1)),e("span",Ks,"-"+r(l.formatCurrency((F=n.payslip.deductions)==null?void 0:F.paye)),1)]),e("div",Hs,[s[26]||(s[26]=e("span",{class:"calc-label"},"NAPSA",-1)),e("span",Xs,"-"+r(l.formatCurrency((L=n.payslip.deductions)==null?void 0:L.napsa)),1)]),e("div",$s,[s[27]||(s[27]=e("span",{class:"calc-label"},"NHIMA",-1)),e("span",se,"-"+r(l.formatCurrency((O=n.payslip.deductions)==null?void 0:O.nhima)),1)]),((R=n.payslip.deductions)==null?void 0:R.other_deductions)>0?(d(),u("div",ee,[s[28]||(s[28]=e("span",{class:"calc-label"},"Other Deductions",-1)),e("span",te,"-"+r(l.formatCurrency((W=n.payslip.deductions)==null?void 0:W.other_deductions)),1)])):p("",!0),e("div",le,[s[29]||(s[29]=e("span",{class:"calc-label"},"Total Deductions",-1)),e("span",ne,"-"+r(l.formatCurrency((q=n.payslip.deductions)==null?void 0:q.total_deductions)),1)])])]),e("section",oe,[e("div",ae,[e("div",re,[s[31]||(s[31]=e("span",{class:"summary-label"},"Gross Pay:",-1)),e("span",ie,r(l.formatCurrency((Y=n.payslip.summary)==null?void 0:Y.gross_pay)),1)]),e("div",de,[s[32]||(s[32]=e("span",{class:"summary-label"},"Total Deductions:",-1)),e("span",ue,"-"+r(l.formatCurrency((G=n.payslip.summary)==null?void 0:G.total_deductions)),1)]),s[34]||(s[34]=e("div",{class:"summary-divider"},null,-1)),e("div",ce,[s[33]||(s[33]=e("span",{class:"summary-label"},"Net Pay:",-1)),e("span",pe,r(l.formatCurrency((Q=n.payslip.summary)==null?void 0:Q.net_pay)),1)])])]),e("section",me,[e("div",{class:f(["status-badge",n.payslip.status])},[e("span",ye,r(l.getStatusIcon(n.payslip.status)),1),e("span",he,r(l.getStatusText(n.payslip.status)),1)],2)])])):p("",!0),e("div",ge,[e("button",{onClick:s[2]||(s[2]=(..._)=>l.close&&l.close(..._)),class:"btn-secondary"},"Close"),!n.isPreview&&((z=n.payslip)!=null&&z.pdf_available)?(d(),u("button",{key:0,onClick:s[3]||(s[3]=(..._)=>l.downloadPdf&&l.downloadPdf(..._)),class:"btn-primary"}," ðŸ“„ Download PDF ")):p("",!0)])])])):p("",!0)]}),_:1})}const fe=K(ts,[["render",ve],["__scopeId","data-v-8883230d"]]),_e={name:"PayrollProcessing",components:{PayslipDetailModal:fe},data(){return{pageName:"Payroll Processing Dashboard",employees:[],processing:!1,loading:!0,error:null,successMessage:null,taxConfigWarning:null,searchQuery:"",filterStatus:"all",payrollPeriod:"",startDate:"",endDate:"",showModal:!1,selectedEmployeeId:null,showPreviewModal:!1,showAdjustmentModal:!1,previewEmployees:[],adjustedEmployee:null,currentAdjustments:{overtime_bonus:0,other_bonuses:0,loan_deductions:0,advance_deductions:0,bonuses:0,deductions:0}}},computed:{pendingCount(){return this.employees.filter(t=>t.payroll_status==="pending").length},paidCount(){return this.employees.filter(t=>t.payroll_status==="paid").length},totalPayroll(){return this.employees.filter(t=>t.payroll_status==="pending").reduce((t,s)=>t+(s.net_pay||0),0)},filteredEmployees(){let t=this.employees;if(this.filterStatus!=="all"&&(t=t.filter(s=>s.payroll_status===this.filterStatus)),this.searchQuery){const s=this.searchQuery.toLowerCase();t=t.filter(a=>a.name.toLowerCase().includes(s)||a.position.toLowerCase().includes(s)||a.id.toString().includes(s)||a.email&&a.email.toLowerCase().includes(s))}return t},selectedCount(){return this.employees.filter(t=>t.selected).length},allSelected(){return this.filteredEmployees.length>0&&this.filteredEmployees.every(t=>t.selected)},previewTotalGross(){return this.previewEmployees.reduce((t,s)=>t+(s.gross_salary||0),0)},previewTotalNet(){return this.previewEmployees.reduce((t,s)=>t+this.calculateAdjustedNet(s),0)},previewTotalAdjustments(){return this.previewEmployees.reduce((t,s)=>{const a=s.adjustments||{};return t+(a.bonuses||0)-(a.deductions||0)},0)}},async mounted(){console.log("ðŸš€ PayrollProcessing component mounted"),await this.initializePayrollPeriod(),await this.fetchEmployees()},methods:{updateDateRange(){if(console.log("ðŸ“… Date range updated - payrollPeriod:",this.payrollPeriod),this.payrollPeriod){const[t,s]=this.payrollPeriod.split("-");this.startDate=`${t}-${s}-01`;const a=new Date(t,parseInt(s),0);this.endDate=`${t}-${s}-${a.getDate().toString().padStart(2,"0")}`,console.log("ðŸ“… Calculated date range:",{startDate:this.startDate,endDate:this.endDate})}},async refreshPayrollData(){console.log("ðŸ”„ Manually refreshing payroll data..."),await this.fetchEmployees()},initializePayrollPeriod(){const t=new Date,s=t.getFullYear(),i=(t.getMonth()+1).toString().padStart(2,"0");this.payrollPeriod=`${s}-${i}`,console.log("ðŸ“… Initialized payroll period:",this.payrollPeriod),this.updateDateRange()},async fetchEmployees(){this.loading=!0,this.error=null;try{const t={payroll_period:this.payrollPeriod,start_date:this.startDate,end_date:this.endDate,per_page:1e3};console.log("ðŸ“¡ Fetching payroll summary data with params:",t);const s=await v.get("/api/admin/payroll/employees-summary",{params:t});console.log("âœ… Payroll Employees Summary API Response:",s.data),this.employees=s.data.data.map(a=>({id:a.id,name:a.name,email:a.email,position:a.position||a.department||"Unassigned",base_salary:a.base_salary||0,gross_salary:a.gross_salary||0,net_pay:a.net_pay||0,payroll_status:a.payroll_status||"pending",payPeriod:a.pay_period||this.payrollPeriod,employee_record:a,selected:!1,payslip_data:a.payslip_data,adjustments:a.adjustments||{overtime_bonus:0,other_bonuses:0,loan_deductions:0,advance_deductions:0,bonuses:0,deductions:0}})),console.log(`âœ… Final payroll data loaded: ${this.employees.length} employees`)}catch(t){console.error("âŒ Failed to load payroll data:",t),this.handleError(t)}finally{this.loading=!1}},getPayrollDates(){const t={payroll_period:this.payrollPeriod,start_date:this.startDate,end_date:this.endDate};return console.log("ðŸ“… getPayrollDates returning:",t),t},preparePayrollPayload(t){const a={employee_ids:t.map(i=>parseInt(i)).filter(i=>!isNaN(i)),...this.getPayrollDates()};return console.log("ðŸ“¦ Prepared payroll payload:",a),a},showPreview(){const t=this.employees.filter(s=>s.payroll_status==="pending"&&s.selected);if(t.length===0){this.showError("Please select pending employees to preview.");return}this.previewEmployees=t.map(s=>({...s,adjustments:{overtime_bonus:0,other_bonuses:0,loan_deductions:0,advance_deductions:0,bonuses:0,deductions:0,...s.adjustments||{}}})),this.showPreviewModal=!0},closePreview(){this.showPreviewModal=!1,this.previewEmployees=[]},editAdjustments(t){var s,a,i,n,l,y;this.adjustedEmployee=t,this.currentAdjustments={overtime_bonus:((s=t.adjustments)==null?void 0:s.overtime_bonus)||0,other_bonuses:((a=t.adjustments)==null?void 0:a.other_bonuses)||0,loan_deductions:((i=t.adjustments)==null?void 0:i.loan_deductions)||0,advance_deductions:((n=t.adjustments)==null?void 0:n.advance_deductions)||0,bonuses:((l=t.adjustments)==null?void 0:l.bonuses)||0,deductions:((y=t.adjustments)==null?void 0:y.deductions)||0},this.showAdjustmentModal=!0},closeAdjustmentModal(){this.showAdjustmentModal=!1,this.adjustedEmployee=null,this.currentAdjustments={overtime_bonus:0,other_bonuses:0,loan_deductions:0,advance_deductions:0,bonuses:0,deductions:0}},updateAdjustments(t){t.adjustments.bonuses=(parseFloat(t.adjustments.overtime_bonus)||0)+(parseFloat(t.adjustments.other_bonuses)||0),t.adjustments.deductions=(parseFloat(t.adjustments.loan_deductions)||0)+(parseFloat(t.adjustments.advance_deductions)||0)},calculateAdjustedNet(t){const s=t.net_pay||0,a=t.adjustments||{},i=(a.bonuses||0)-(a.deductions||0);return s+i},calculateNetChange(t){const s=t.adjustments||{};return(s.bonuses||0)-(s.deductions||0)},getNetChangeClass(t){return this.calculateNetChange(t)>=0?"positive":"negative"},getCurrentNetChangeClass(){return this.currentAdjustments.bonuses-this.currentAdjustments.deductions>=0?"positive":"negative"},saveEmployeeAdjustments(){this.adjustedEmployee&&(this.adjustedEmployee.adjustments||(this.adjustedEmployee.adjustments={}),Object.assign(this.adjustedEmployee.adjustments,this.currentAdjustments),this.updateAdjustments(this.adjustedEmployee),this.showSuccess("Adjustments saved successfully!"),this.closeAdjustmentModal())},saveAdjustments(){this.previewEmployees.forEach(t=>{const s=this.employees.find(a=>a.id===t.id);s&&(s.adjustments={...t.adjustments})}),this.showSuccess("All adjustments saved successfully!"),this.closePreview()},async processWithAdjustments(){this.processing=!0;try{const t={employee_ids:this.previewEmployees.map(a=>a.id),adjustments:this.previewEmployees.reduce((a,i)=>(a[i.id]=i.adjustments,a),{}),...this.getPayrollDates()};console.log("ðŸ“¤ Processing payroll with adjustments:",t);const s=await v.post("/api/admin/payroll/process",t);console.log("âœ… Payroll with adjustments processed:",s.data),await this.fetchEmployees(),this.showSuccess("Payroll processed successfully with adjustments!"),this.closePreview()}catch(t){console.error("âŒ Payroll processing with adjustments failed:",t),this.handlePayrollError(t)}finally{this.processing=!1}},showBulkAdjustments(){const t=this.employees.filter(s=>s.selected);if(t.length===0){this.showError("Please select employees for bulk adjustments.");return}this.previewEmployees=t.map(s=>({...s,adjustments:{overtime_bonus:0,other_bonuses:0,loan_deductions:0,advance_deductions:0,bonuses:0,deductions:0,...s.adjustments||{}}})),this.showPreviewModal=!0},async processPayroll(){const t=this.employees.filter(s=>s.payroll_status==="pending");if(console.log("ðŸš€ Processing payroll for pending employees:",t.map(s=>({id:s.id,name:s.name,net_pay:s.net_pay,adjustments:s.adjustments}))),t.length===0){this.showError("No pending payroll to process.");return}if(!confirm(`Process payroll for ${t.length} pending employee(s)?`)){console.log("âŒ User cancelled payroll processing");return}this.processing=!0;try{const s=t.map(n=>n.id),a={...this.preparePayrollPayload(s),adjustments:t.reduce((n,l)=>(l.adjustments&&(n[l.id]=l.adjustments),n),{})};console.log("ðŸ“¤ Sending payroll process request with payload:",a);const i=await v.post("/api/admin/payroll/process",a);console.log("âœ… Payroll process response:",i.data),await this.fetchEmployees(),this.showSuccess("Payroll processed successfully!")}catch(s){console.error("âŒ Payroll processing error:",s),this.handlePayrollError(s)}finally{this.processing=!1}},async bulkMarkPaid(){const t=this.employees.filter(a=>a.selected&&a.payroll_status),s=t.map(a=>a.id);if(console.log("ðŸ”„ Bulk marking as paid:",t.map(a=>({id:a.id,name:a.name,current_status:a.payroll_status}))),s.length===0){this.showError("No employees with payroll status selected.");return}if(!confirm(`Mark ${s.length} employee(s) as paid?`)){console.log("âŒ User cancelled bulk mark paid");return}try{const a=this.preparePayrollPayload(s);console.log("ðŸ“¤ Sending bulk mark paid request with payload:",a);const i=await v.post("/api/admin/payroll/process",a);console.log("âœ… Bulk mark paid response:",i.data),await this.fetchEmployees(),this.showSuccess(`${s.length} employee(s) marked as paid.`)}catch(a){console.error("âŒ Bulk mark paid error:",a),this.handlePayrollError(a)}},async bulkMarkPending(){const t=this.employees.filter(a=>a.selected&&a.payroll_status),s=t.map(a=>a.id);if(console.log("ðŸ”„ Bulk marking as pending:",t.map(a=>({id:a.id,name:a.name,current_status:a.payroll_status}))),s.length===0){this.showError("No employees with payroll status selected.");return}if(!confirm(`Mark ${s.length} employee(s) as pending?`)){console.log("âŒ User cancelled bulk mark pending");return}try{const a={employee_ids:s,status:"pending",...this.getPayrollDates()};console.log("ðŸ“¤ Sending bulk mark pending request with payload:",a);const i=await v.post("/api/admin/payroll/update-status",a);console.log("âœ… Bulk mark pending response:",i.data),await this.fetchEmployees(),this.showSuccess(`${s.length} employee(s) marked as pending.`)}catch(a){console.error("âŒ Bulk mark pending error:",a),this.handlePayrollError(a)}},async toggleStatus(t){const s=this.employees.find(n=>n.id===t);if(console.log("ðŸ”„ Toggling status for employee:",{id:t,name:s==null?void 0:s.name,current_status:s==null?void 0:s.payroll_status}),!s||!s.payroll_status){this.showError("Cannot toggle status for employee without payroll status");return}const a=s.payroll_status,i=a==="pending"?"paid":"pending";console.log(`ðŸ”„ Changing status from ${a} to ${i}`);try{let n;i==="paid"?(n=this.preparePayrollPayload([t]),console.log("ðŸ“¤ Marking as paid with payload:",n),await v.post("/api/admin/payroll/process",n)):(n={employee_ids:[t],status:i,...this.getPayrollDates()},console.log("ðŸ“¤ Marking as pending with payload:",n),await v.post("/api/admin/payroll/update-status",n)),await this.fetchEmployees(),this.showSuccess(`Employee marked as ${i}.`)}catch(n){console.error("âŒ Toggle status error:",n),this.handlePayrollError(n)}},async setInitialStatus(t){const s=this.employees.find(i=>i.id===t);if(console.log("âš™ï¸ Setting initial status for employee:",{id:t,name:s==null?void 0:s.name}),!s)return;const a=confirm(`Set initial status as Pending?

Click OK for Pending, Cancel for Paid`)?"pending":"paid";console.log(`âš™ï¸ Setting initial status to: ${a}`);try{let i;a==="paid"?(i=this.preparePayrollPayload([t]),console.log("ðŸ“¤ Setting as paid with payload:",i),await v.post("/api/admin/payroll/process",i)):(i={employee_ids:[t],status:a,...this.getPayrollDates()},console.log("ðŸ“¤ Setting as pending with payload:",i),await v.post("/api/admin/payroll/update-status",i)),await this.fetchEmployees(),this.showSuccess(`Employee status set to ${a}.`)}catch(i){console.error("âŒ Set initial status error:",i),this.handlePayrollError(i)}},getInitials(t){return!t||t==="â€”"||t==="Unknown Employee"?"??":t.split(" ").map(s=>s[0]).join("").toUpperCase().substring(0,2)},getAvatarColor(t){const s=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #30cfd0 0%, #330867 100%)"],a=t.split("").reduce((i,n)=>i+n.charCodeAt(0),0)%s.length;return s[a]},addEmployee(){console.log("âž• Navigating to add employee page"),this.$router.push({name:"admin.employees.create"})},toggleSelectAll(){const t=!this.allSelected;console.log(`ðŸ”˜ Toggle select all: ${t?"selecting":"deselecting"} all ${this.filteredEmployees.length} employees`),this.filteredEmployees.forEach(s=>{s.selected=t})},clearSelection(){console.log("ðŸ”˜ Clearing selection"),this.employees.forEach(t=>{t.selected=!1})},viewDetails(t){const s=this.employees.find(a=>a.id===t);console.log("ðŸ‘ï¸ Viewing details for employee:",{id:s==null?void 0:s.id,name:s==null?void 0:s.name,base_salary:s==null?void 0:s.base_salary,gross_salary:s==null?void 0:s.gross_salary,net_pay:s==null?void 0:s.net_pay,status:s==null?void 0:s.payroll_status}),this.selectedEmployeeId=t,this.showModal=!0},async deleteEmployee(t){const s=this.employees.find(a=>a.id===t);if(console.log("ðŸ—‘ï¸ Attempting to delete employee:",{id:t,name:s==null?void 0:s.name}),!confirm(`Delete ${(s==null?void 0:s.name)||"this employee"}? This cannot be undone.`)){console.log("âŒ User cancelled employee deletion");return}try{await v.delete(`/api/admin/employees/${t}`),this.employees=this.employees.filter(a=>a.id!==t),console.log("âœ… Employee deleted successfully"),this.showSuccess("Employee removed successfully.")}catch(a){console.error("âŒ Delete employee error:",a),this.handleError(a)}},clearSearch(){console.log("ðŸ” Clearing search query"),this.searchQuery=""},dismissError(){console.log("âŒ Dismissing error banner"),this.error=null},showSuccess(t){console.log("âœ… Showing success message:",t),this.successMessage=t,setTimeout(()=>{this.successMessage=null},5e3)},showError(t){console.log("âŒ Showing error message:",t),this.error=t,setTimeout(()=>{this.error=null},5e3)},formatCurrency(t){return t==null?"â€”":new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW",minimumFractionDigits:2}).format(t)},formatDate(t){if(!t)return"â€”";if(t.match(/^\d{4}-\d{2}$/)){const[a,i]=t.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(i)-1]} ${a}`}const s=new Date(t);return isNaN(s.getTime())?"â€”":s.toLocaleDateString("en-ZM",{year:"numeric",month:"short",day:"numeric"})},handlePayrollError(t){var s;if(console.error("ðŸ’¥ Payroll error handler triggered:",t),((s=t.response)==null?void 0:s.status)===422){const a=t.response.data;let i="Validation failed: ";if(a.errors){const n=a.errors,l=[];for(const[y,h]of Object.entries(n))l.push(`${y}: ${Array.isArray(h)?h.join(", "):h}`);i+=l.join("; ")}else a.message?i=a.message:i+="Please check the data and try again.";console.error("âŒ Validation error:",i),this.showError(i)}else this.handleError(t)},handleError(t){var a,i,n,l,y,h,o,c,b;console.error("ðŸ’¥ Global error handler triggered:",t);let s="An unexpected error occurred.";if(((a=t.response)==null?void 0:a.status)===401){s="Your session has expired. Please log in again.",console.warn("ðŸ” Authentication error - redirecting to login"),(n=(i=this.$store)==null?void 0:i.auth)!=null&&n.clearAuth&&this.$store.auth.clearAuth(),this.$router.push({name:"login"});return}else if(((l=t.response)==null?void 0:l.status)===403)s="You do not have permission to perform this action.";else{if(((y=t.response)==null?void 0:y.status)===422)return;(o=(h=t.response)==null?void 0:h.data)!=null&&o.message?s=t.response.data.message:t.message?s=t.message:t.code==="ERR_NETWORK"&&(s="Network error. Please check your connection.")}this.error=s,console.error("API Error details:",{message:t.message,response:(c=t.response)==null?void 0:c.data,status:(b=t.response)==null?void 0:b.status})}}},be={class:"payroll-view"},we={class:"header"},Pe={class:"title"},je={class:"header-actions"},ke=["disabled"],Ce=["disabled"],Ee={key:0,class:"spinner-small"},Ae={class:"date-selection-section"},De={class:"date-inputs"},Se={class:"form-group"},Me={class:"form-group"},Ne={class:"form-group"},Te={key:0,class:"warning-banner"},Ie={key:0,class:"error-banner"},Be={key:0,class:"success-banner"},Ue={class:"summary-cards"},xe={class:"card"},Ve={class:"value"},Fe={class:"card"},Le={class:"value pending"},Oe={class:"card"},Re={class:"value"},We={class:"card"},qe={class:"value success"},Ye={class:"filters-section"},Ge={class:"search-box"},Qe={class:"filter-buttons"},ze={class:"content"},Je={key:0,class:"loading-state"},Ze={key:1,class:"empty-state"},Ke={key:2,class:"empty-state"},He={key:3,class:"table-container"},Xe={class:"payroll-table"},$e=["checked"],st=["onUpdate:modelValue"],et={class:"employee-name"},tt={class:"employee-info"},lt={class:"name"},nt={class:"email"},ot={class:"position-badge"},at={class:"salary"},rt={class:"gross-salary"},it={class:"net-pay"},dt={key:1,class:"status unknown"},ut={class:"action-buttons"},ct=["onClick"],pt=["onClick"],mt=["onClick","title"],yt=["onClick"],ht=["onClick"],gt={key:0,class:"bulk-actions"},vt={class:"selected-count"},ft={key:0,class:"modal-overlay"},_t={class:"modal-content large-modal"},bt={class:"modal-header"},wt={class:"preview-content"},Pt={class:"preview-summary"},jt={class:"summary-grid"},kt={class:"summary-item"},Ct={class:"value"},Et={class:"summary-item"},At={class:"value"},Dt={class:"summary-item"},St={class:"value"},Mt={class:"summary-item"},Nt={class:"value"},Tt={class:"adjustments-section"},It={class:"adjustments-list"},Bt={class:"employee-header"},Ut={class:"employee-info"},xt={class:"position"},Vt={class:"salary-info"},Ft={class:"adjustment-controls"},Lt={class:"adjustment-group"},Ot=["onUpdate:modelValue","onInput"],Rt={class:"adjustment-group"},Wt=["onUpdate:modelValue","onInput"],qt={class:"adjustment-group"},Yt=["onUpdate:modelValue","onInput"],Gt={class:"adjustment-group"},Qt=["onUpdate:modelValue","onInput"],zt={class:"adjustment-totals"},Jt={class:"total-item"},Zt={class:"positive"},Kt={class:"total-item"},Ht={class:"negative"},Xt={class:"total-item net-change"},$t={class:"modal-actions"},sl={key:0,class:"spinner-small"},el={key:1,class:"modal-overlay"},tl={class:"modal-content"},ll={class:"modal-header"},nl={class:"adjustment-form"},ol={class:"form-group"},al={class:"form-group"},rl={class:"form-group"},il={class:"form-group"},dl={class:"adjustment-summary"},ul={class:"summary-row"},cl={class:"positive"},pl={class:"summary-row"},ml={class:"negative"},yl={class:"summary-row net-change"},hl={class:"modal-actions"};function gl(t,s,a,i,n,l){var h;const y=$("PayslipDetailModal");return d(),u("div",be,[e("header",we,[e("h1",Pe,r(n.pageName),1),e("div",je,[e("button",{onClick:s[0]||(s[0]=(...o)=>l.addEmployee&&l.addEmployee(...o)),class:"add-btn"},[...s[34]||(s[34]=[e("span",{class:"btn-icon"},"+",-1),w(" Add Employee ",-1)])]),e("button",{onClick:s[1]||(s[1]=(...o)=>l.showPreview&&l.showPreview(...o)),class:"preview-btn",disabled:n.processing||l.pendingCount===0}," ðŸ“Š Preview & Adjust ",8,ke),e("button",{onClick:s[2]||(s[2]=(...o)=>l.processPayroll&&l.processPayroll(...o)),class:"process-btn",disabled:n.processing||l.pendingCount===0},[n.processing?(d(),u("span",Ee)):p("",!0),w(" "+r(n.processing?"Processing...":"Process Payroll"),1)],8,Ce)])]),e("div",Ae,[e("div",De,[e("div",Se,[s[35]||(s[35]=e("label",{class:"form-label"},"Payroll Period (YYYY-MM)",-1)),m(e("input",{type:"month","onUpdate:modelValue":s[3]||(s[3]=o=>n.payrollPeriod=o),onChange:s[4]||(s[4]=(...o)=>l.updateDateRange&&l.updateDateRange(...o)),class:"date-input"},null,544),[[g,n.payrollPeriod]])]),e("div",Me,[s[36]||(s[36]=e("label",{class:"form-label"},"Start Date",-1)),m(e("input",{type:"date","onUpdate:modelValue":s[5]||(s[5]=o=>n.startDate=o),class:"date-input"},null,512),[[g,n.startDate]])]),e("div",Ne,[s[37]||(s[37]=e("label",{class:"form-label"},"End Date",-1)),m(e("input",{type:"date","onUpdate:modelValue":s[6]||(s[6]=o=>n.endDate=o),class:"date-input"},null,512),[[g,n.endDate]])]),e("button",{onClick:s[7]||(s[7]=(...o)=>l.refreshPayrollData&&l.refreshPayrollData(...o)),class:"refresh-btn"}," ðŸ”„ Refresh ")])]),P(k,{name:"fade"},{default:j(()=>[n.taxConfigWarning?(d(),u("div",Te,[e("span",null,"âš ï¸ "+r(n.taxConfigWarning),1),e("button",{onClick:s[8]||(s[8]=o=>n.taxConfigWarning=null),class:"dismiss-btn"},"Ã—")])):p("",!0)]),_:1}),P(k,{name:"fade"},{default:j(()=>[n.error?(d(),u("div",Ie,[e("span",null,r(n.error),1),e("button",{onClick:s[9]||(s[9]=(...o)=>l.dismissError&&l.dismissError(...o)),class:"dismiss-btn"},"Ã—")])):p("",!0)]),_:1}),P(k,{name:"fade"},{default:j(()=>[n.successMessage?(d(),u("div",Be,[e("span",null,r(n.successMessage),1),e("button",{onClick:s[10]||(s[10]=o=>n.successMessage=null),class:"dismiss-btn"},"Ã—")])):p("",!0)]),_:1}),e("div",Ue,[e("div",xe,[s[38]||(s[38]=e("div",{class:"card-icon employees"},"ðŸ‘¥",-1)),s[39]||(s[39]=e("h3",null,"Total Employees",-1)),e("p",Ve,r(n.employees.length),1)]),e("div",Fe,[s[40]||(s[40]=e("div",{class:"card-icon pending"},"â³",-1)),s[41]||(s[41]=e("h3",null,"Pending Payroll",-1)),e("p",Le,r(l.pendingCount),1)]),e("div",Oe,[s[42]||(s[42]=e("div",{class:"card-icon amount"},"ðŸ’°",-1)),s[43]||(s[43]=e("h3",null,"Total Payroll Amount",-1)),e("p",Re,r(l.formatCurrency(l.totalPayroll)),1)]),e("div",We,[s[44]||(s[44]=e("div",{class:"card-icon paid"},"âœ“",-1)),s[45]||(s[45]=e("h3",null,"Paid This Period",-1)),e("p",qe,r(l.paidCount),1)])]),e("div",Ye,[e("div",Ge,[m(e("input",{"onUpdate:modelValue":s[11]||(s[11]=o=>n.searchQuery=o),type:"text",placeholder:"Search by name, position, or ID...",class:"search-input"},null,512),[[g,n.searchQuery]])]),e("div",Qe,[e("button",{onClick:s[12]||(s[12]=o=>n.filterStatus="all"),class:f(["filter-btn",{active:n.filterStatus==="all"}])}," All ("+r(n.employees.length)+") ",3),e("button",{onClick:s[13]||(s[13]=o=>n.filterStatus="pending"),class:f(["filter-btn",{active:n.filterStatus==="pending"}])}," Pending ("+r(l.pendingCount)+") ",3),e("button",{onClick:s[14]||(s[14]=o=>n.filterStatus="paid"),class:f(["filter-btn",{active:n.filterStatus==="paid"}])}," Paid ("+r(l.paidCount)+") ",3)])]),e("div",ze,[n.loading?(d(),u("div",Je,[...s[46]||(s[46]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading payroll data...",-1)])])):l.filteredEmployees.length===0&&!n.searchQuery?(d(),u("div",Ze,[s[47]||(s[47]=e("div",{class:"empty-icon"},"ðŸ“‹",-1)),s[48]||(s[48]=e("h2",null,"No Employees Found",-1)),s[49]||(s[49]=e("p",null,"Add employees to start processing payroll.",-1)),e("button",{onClick:s[15]||(s[15]=(...o)=>l.addEmployee&&l.addEmployee(...o)),class:"btn-primary"},"Add Your First Employee")])):l.filteredEmployees.length===0&&n.searchQuery?(d(),u("div",Ke,[s[50]||(s[50]=e("div",{class:"empty-icon"},"ðŸ”",-1)),s[51]||(s[51]=e("h2",null,"No Results Found",-1)),s[52]||(s[52]=e("p",null,"Try adjusting your search criteria.",-1)),e("button",{onClick:s[16]||(s[16]=(...o)=>l.clearSearch&&l.clearSearch(...o)),class:"btn-secondary"},"Clear Search")])):(d(),u("div",He,[e("table",Xe,[e("thead",null,[e("tr",null,[e("th",null,[e("input",{type:"checkbox",onChange:s[17]||(s[17]=(...o)=>l.toggleSelectAll&&l.toggleSelectAll(...o)),checked:l.allSelected,class:"checkbox"},null,40,$e)]),s[53]||(s[53]=e("th",null,"ID",-1)),s[54]||(s[54]=e("th",null,"Employee",-1)),s[55]||(s[55]=e("th",null,"Position",-1)),s[56]||(s[56]=e("th",null,"Base Salary",-1)),s[57]||(s[57]=e("th",null,"Gross Salary",-1)),s[58]||(s[58]=e("th",null,"Net Pay",-1)),s[59]||(s[59]=e("th",null,"Status",-1)),s[60]||(s[60]=e("th",null,"Pay Period",-1)),s[61]||(s[61]=e("th",null,"Actions",-1))])]),e("tbody",null,[(d(!0),u(J,null,Z(l.filteredEmployees,o=>(d(),u("tr",{key:o.id,class:f({selected:o.selected})},[e("td",null,[m(e("input",{type:"checkbox","onUpdate:modelValue":c=>o.selected=c,class:"checkbox"},null,8,st),[[ss,o.selected]])]),e("td",null,[e("strong",null,"#"+r(o.id),1)]),e("td",null,[e("div",et,[e("div",{class:"employee-avatar",style:es({background:l.getAvatarColor(o.name)})},r(l.getInitials(o.name)),5),e("div",tt,[e("div",lt,r(o.name),1),e("div",nt,r(o.email||"â€”"),1)])])]),e("td",null,[e("span",ot,r(o.position),1)]),e("td",at,r(l.formatCurrency(o.base_salary)),1),e("td",rt,r(l.formatCurrency(o.gross_salary)),1),e("td",it,r(l.formatCurrency(o.net_pay)),1),e("td",null,[o.payroll_status?(d(),u("span",{key:0,class:f(["status",o.payroll_status.toLowerCase()])},[s[62]||(s[62]=e("span",{class:"status-dot"},null,-1)),w(" "+r(o.payroll_status.charAt(0).toUpperCase()+o.payroll_status.slice(1)),1)],2)):(d(),u("span",dt,[...s[63]||(s[63]=[e("span",{class:"status-dot"},null,-1),w(" Not Set ",-1)])]))]),e("td",null,r(l.formatDate(o.payPeriod)),1),e("td",null,[e("div",ut,[e("button",{onClick:c=>l.viewDetails(o.id),class:"action-btn view",title:"View Details"}," ðŸ‘ï¸ ",8,ct),e("button",{onClick:c=>l.editAdjustments(o),class:"action-btn adjust",title:"Add Adjustments"}," âš™ï¸ ",8,pt),o.payroll_status?(d(),u("button",{key:0,onClick:c=>l.toggleStatus(o.id),class:f(["action-btn",o.payroll_status.toLowerCase()]),title:o.payroll_status==="pending"?"Mark as Paid":"Mark as Pending"},r(o.payroll_status==="pending"?"âœ“":"â†»"),11,mt)):(d(),u("button",{key:1,onClick:c=>l.setInitialStatus(o.id),class:"action-btn unknown",title:"Set Status"}," âš™ï¸ ",8,yt)),e("button",{onClick:c=>l.deleteEmployee(o.id),class:"action-btn delete",title:"Delete Employee"}," ðŸ—‘ï¸ ",8,ht)])])],2))),128))])]),l.selectedCount>0?(d(),u("div",gt,[e("span",vt,r(l.selectedCount)+" employee(s) selected",1),e("button",{onClick:s[18]||(s[18]=(...o)=>l.showBulkAdjustments&&l.showBulkAdjustments(...o)),class:"bulk-btn adjust"},"Bulk Adjustments"),e("button",{onClick:s[19]||(s[19]=(...o)=>l.bulkMarkPaid&&l.bulkMarkPaid(...o)),class:"bulk-btn paid"},"Mark Selected as Paid"),e("button",{onClick:s[20]||(s[20]=(...o)=>l.bulkMarkPending&&l.bulkMarkPending(...o)),class:"bulk-btn pending"},"Mark Selected as Pending"),e("button",{onClick:s[21]||(s[21]=(...o)=>l.clearSelection&&l.clearSelection(...o)),class:"bulk-btn clear"},"Clear Selection")])):p("",!0)]))]),P(y,{visible:n.showModal,"employee-id":n.selectedEmployeeId,"payroll-period":n.payrollPeriod,onClose:s[22]||(s[22]=o=>n.showModal=!1)},null,8,["visible","employee-id","payroll-period"]),n.showPreviewModal?(d(),u("div",ft,[e("div",_t,[e("div",bt,[s[64]||(s[64]=e("h2",null,"Payroll Preview & Adjustments",-1)),e("button",{onClick:s[23]||(s[23]=(...o)=>l.closePreview&&l.closePreview(...o)),class:"close-btn"},"Ã—")]),e("div",wt,[e("div",Pt,[s[69]||(s[69]=e("h3",null,"Payroll Summary",-1)),e("div",jt,[e("div",kt,[s[65]||(s[65]=e("span",{class:"label"},"Total Employees:",-1)),e("span",Ct,r(n.previewEmployees.length),1)]),e("div",Et,[s[66]||(s[66]=e("span",{class:"label"},"Total Gross:",-1)),e("span",At,r(l.formatCurrency(l.previewTotalGross)),1)]),e("div",Dt,[s[67]||(s[67]=e("span",{class:"label"},"Total Net Pay:",-1)),e("span",St,r(l.formatCurrency(l.previewTotalNet)),1)]),e("div",Mt,[s[68]||(s[68]=e("span",{class:"label"},"Total Adjustments:",-1)),e("span",Nt,r(l.formatCurrency(l.previewTotalAdjustments)),1)])])]),e("div",Tt,[s[77]||(s[77]=e("h3",null,"Employee Adjustments",-1)),e("div",It,[(d(!0),u(J,null,Z(n.previewEmployees,o=>(d(),u("div",{key:o.id,class:f(["employee-adjustment",{"has-adjustments":o.adjustments&&(o.adjustments.bonuses>0||o.adjustments.deductions>0)}])},[e("div",Bt,[e("div",Ut,[e("strong",null,r(o.name),1),e("span",xt,r(o.position),1)]),e("div",Vt,[e("span",null,"Base: "+r(l.formatCurrency(o.base_salary)),1),e("span",null,"Net: "+r(l.formatCurrency(l.calculateAdjustedNet(o))),1)])]),e("div",Ft,[e("div",Lt,[s[70]||(s[70]=e("label",null,"Overtime Bonus:",-1)),m(e("input",{type:"number","onUpdate:modelValue":c=>o.adjustments.overtime_bonus=c,onInput:c=>l.updateAdjustments(o),placeholder:"0.00",min:"0",step:"0.01"},null,40,Ot),[[g,o.adjustments.overtime_bonus]])]),e("div",Rt,[s[71]||(s[71]=e("label",null,"Other Bonuses:",-1)),m(e("input",{type:"number","onUpdate:modelValue":c=>o.adjustments.other_bonuses=c,onInput:c=>l.updateAdjustments(o),placeholder:"0.00",min:"0",step:"0.01"},null,40,Wt),[[g,o.adjustments.other_bonuses]])]),e("div",qt,[s[72]||(s[72]=e("label",null,"Loan Deductions:",-1)),m(e("input",{type:"number","onUpdate:modelValue":c=>o.adjustments.loan_deductions=c,onInput:c=>l.updateAdjustments(o),placeholder:"0.00",min:"0",step:"0.01"},null,40,Yt),[[g,o.adjustments.loan_deductions]])]),e("div",Gt,[s[73]||(s[73]=e("label",null,"Advance Deductions:",-1)),m(e("input",{type:"number","onUpdate:modelValue":c=>o.adjustments.advance_deductions=c,onInput:c=>l.updateAdjustments(o),placeholder:"0.00",min:"0",step:"0.01"},null,40,Qt),[[g,o.adjustments.advance_deductions]])]),e("div",zt,[e("div",Jt,[s[74]||(s[74]=e("span",null,"Total Bonuses:",-1)),e("span",Zt,r(l.formatCurrency(o.adjustments.bonuses)),1)]),e("div",Kt,[s[75]||(s[75]=e("span",null,"Total Deductions:",-1)),e("span",Ht,r(l.formatCurrency(o.adjustments.deductions)),1)]),e("div",Xt,[s[76]||(s[76]=e("span",null,"Net Change:",-1)),e("span",{class:f(l.getNetChangeClass(o))},r(l.formatCurrency(l.calculateNetChange(o))),3)])])])],2))),128))])])]),e("div",$t,[e("button",{onClick:s[24]||(s[24]=(...o)=>l.closePreview&&l.closePreview(...o)),class:"btn-secondary"},"Cancel"),e("button",{onClick:s[25]||(s[25]=(...o)=>l.saveAdjustments&&l.saveAdjustments(...o)),class:"btn-primary"},"Save Adjustments"),e("button",{onClick:s[26]||(s[26]=(...o)=>l.processWithAdjustments&&l.processWithAdjustments(...o)),class:"btn-success"},[n.processing?(d(),u("span",sl)):p("",!0),s[78]||(s[78]=w(" Process Payroll with Adjustments ",-1))])])])])):p("",!0),n.showAdjustmentModal?(d(),u("div",el,[e("div",tl,[e("div",ll,[e("h2",null,"Adjustments for "+r((h=n.adjustedEmployee)==null?void 0:h.name),1),e("button",{onClick:s[27]||(s[27]=(...o)=>l.closeAdjustmentModal&&l.closeAdjustmentModal(...o)),class:"close-btn"},"Ã—")]),e("div",nl,[e("div",ol,[s[79]||(s[79]=e("label",null,"Overtime Bonus:",-1)),m(e("input",{type:"number","onUpdate:modelValue":s[28]||(s[28]=o=>n.currentAdjustments.overtime_bonus=o),placeholder:"0.00",min:"0",step:"0.01"},null,512),[[g,n.currentAdjustments.overtime_bonus]])]),e("div",al,[s[80]||(s[80]=e("label",null,"Other Bonuses:",-1)),m(e("input",{type:"number","onUpdate:modelValue":s[29]||(s[29]=o=>n.currentAdjustments.other_bonuses=o),placeholder:"0.00",min:"0",step:"0.01"},null,512),[[g,n.currentAdjustments.other_bonuses]])]),e("div",rl,[s[81]||(s[81]=e("label",null,"Loan Deductions:",-1)),m(e("input",{type:"number","onUpdate:modelValue":s[30]||(s[30]=o=>n.currentAdjustments.loan_deductions=o),placeholder:"0.00",min:"0",step:"0.01"},null,512),[[g,n.currentAdjustments.loan_deductions]])]),e("div",il,[s[82]||(s[82]=e("label",null,"Advance Deductions:",-1)),m(e("input",{type:"number","onUpdate:modelValue":s[31]||(s[31]=o=>n.currentAdjustments.advance_deductions=o),placeholder:"0.00",min:"0",step:"0.01"},null,512),[[g,n.currentAdjustments.advance_deductions]])]),e("div",dl,[e("div",ul,[s[83]||(s[83]=e("span",null,"Total Bonuses:",-1)),e("span",cl,r(l.formatCurrency(n.currentAdjustments.bonuses)),1)]),e("div",pl,[s[84]||(s[84]=e("span",null,"Total Deductions:",-1)),e("span",ml,r(l.formatCurrency(n.currentAdjustments.deductions)),1)]),e("div",yl,[s[85]||(s[85]=e("span",null,"Net Change:",-1)),e("span",{class:f(l.getCurrentNetChangeClass())},r(l.formatCurrency(n.currentAdjustments.bonuses-n.currentAdjustments.deductions)),3)])])]),e("div",hl,[e("button",{onClick:s[32]||(s[32]=(...o)=>l.closeAdjustmentModal&&l.closeAdjustmentModal(...o)),class:"btn-secondary"},"Cancel"),e("button",{onClick:s[33]||(s[33]=(...o)=>l.saveEmployeeAdjustments&&l.saveEmployeeAdjustments(...o)),class:"btn-primary"},"Save Adjustments")])])])):p("",!0)])}const _l=K(_e,[["render",gl],["__scopeId","data-v-4970a4f2"]]);export{_l as default};
