import{_,u as C}from"./index-CUA5mSp8.js";import{C as x}from"./Toggle-BIGgGeHO.js";import{b as d,p as s,C as f,t as g,a as t,w as e,e as p,q as w,f as c}from"./vendor-CFHPe_rb.js";const P={name:"AdminLayout",components:{ClockToggle:x},data(){return{showProfileDropdown:!1}},setup(){const a=C();return{logout:async()=>{try{await a.logout(),window.location.href="/auth/login"}catch(u){console.error("Logout failed:",u),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/auth/login"}},user:a.user}},computed:{getUserInitials(){var a;return(a=this.user)!=null&&a.name?this.user.name.split(" ").map(o=>o.charAt(0)).join("").toUpperCase().substring(0,2):"A"}},methods:{toggleProfileDropdown(){this.showProfileDropdown=!this.showProfileDropdown},closeProfileDropdown(){this.showProfileDropdown=!1},handleClickOutside(a){const o=this.$el.querySelector(".profile-dropdown");o&&!o.contains(a.target)&&this.closeProfileDropdown()}},mounted(){console.log("AdminLayout mounted - current route:",this.$route.path),console.log("Current user:",this.user),document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}},D={class:"admin-layout"},h={class:"header"},b={class:"header-right"},A={class:"user-profile"},L={class:"profile-dropdown"},S={class:"user-avatar"},I={class:"user-name"},T={key:0,class:"profile-dropdown-menu"},U={class:"layout-body"},E={class:"sidebar"},N={class:"attendance-toggle-section"},V={class:"sidebar-nav"},B={class:"main-content"};function O(a,o,u,r,m,l){var v;const n=p("router-link"),y=p("ClockToggle"),k=p("router-view");return c(),d("div",D,[s("header",h,[o[7]||(o[7]=s("div",{class:"logo"},[s("span",{class:"logo-icon"},"ğŸ’¼"),s("span",{class:"logo-text"},"Payroll System")],-1)),s("div",b,[s("div",A,[s("div",L,[s("button",{class:"profile-trigger",onClick:o[0]||(o[0]=(...i)=>l.toggleProfileDropdown&&l.toggleProfileDropdown(...i))},[s("span",S,g(l.getUserInitials),1),s("span",I,g(((v=r.user)==null?void 0:v.name)||"Admin User"),1),o[3]||(o[3]=s("span",{class:"dropdown-arrow"},"â–¼",-1))]),m.showProfileDropdown?(c(),d("div",T,[t(n,{to:"/admin/profile",class:"dropdown-item",onClick:l.closeProfileDropdown},{default:e(()=>[...o[4]||(o[4]=[s("span",{class:"dropdown-icon"},"ğŸ‘¤",-1),w(" My Profile ",-1)])]),_:1},8,["onClick"]),o[6]||(o[6]=s("div",{class:"dropdown-divider"},null,-1)),s("button",{onClick:o[1]||(o[1]=(...i)=>r.logout&&r.logout(...i)),class:"dropdown-item logout-dropdown-item"},[...o[5]||(o[5]=[s("span",{class:"dropdown-icon"},"ğŸšª",-1),w(" Logout ",-1)])])])):f("",!0)])])])]),m.showProfileDropdown?(c(),d("div",{key:0,class:"dropdown-overlay",onClick:o[2]||(o[2]=(...i)=>l.closeProfileDropdown&&l.closeProfileDropdown(...i))})):f("",!0),s("div",U,[s("aside",E,[s("div",N,[t(y)]),s("nav",V,[t(n,{to:"/admin/dashboard",class:"nav-item"},{default:e(()=>[...o[8]||(o[8]=[s("span",{class:"nav-icon"},"ğŸ“Š",-1),s("span",{class:"nav-text"},"Dashboard",-1)])]),_:1}),t(n,{to:"/admin/employees",class:"nav-item"},{default:e(()=>[...o[9]||(o[9]=[s("span",{class:"nav-icon"},"ğŸ‘¥",-1),s("span",{class:"nav-text"},"Employees",-1)])]),_:1}),t(n,{to:"/admin/payroll",class:"nav-item"},{default:e(()=>[...o[10]||(o[10]=[s("span",{class:"nav-icon"},"ğŸ’°",-1),s("span",{class:"nav-text"},"Payroll",-1)])]),_:1}),t(n,{to:"/admin/payslips",class:"nav-item"},{default:e(()=>[...o[11]||(o[11]=[s("span",{class:"nav-icon"},"ğŸ“„",-1),s("span",{class:"nav-text"},"Payslips",-1)])]),_:1}),t(n,{to:"/admin/attendance",class:"nav-item"},{default:e(()=>[...o[12]||(o[12]=[s("span",{class:"nav-icon"},"â°",-1),s("span",{class:"nav-text"},"Attendance",-1)])]),_:1}),t(n,{to:"/admin/leaves",class:"nav-item"},{default:e(()=>[...o[13]||(o[13]=[s("span",{class:"nav-icon"},"ğŸ–ï¸",-1),s("span",{class:"nav-text"},"Leave Management",-1)])]),_:1}),t(n,{to:"/admin/tax",class:"nav-item"},{default:e(()=>[...o[14]||(o[14]=[s("span",{class:"nav-icon"},"ğŸ“‹",-1),s("span",{class:"nav-text"},"Tax Configuration",-1)])]),_:1}),t(n,{to:"/admin/reports",class:"nav-item"},{default:e(()=>[...o[15]||(o[15]=[s("span",{class:"nav-icon"},"ğŸ“ˆ",-1),s("span",{class:"nav-text"},"Reports",-1)])]),_:1}),t(n,{to:"/admin/audit-logs",class:"nav-item"},{default:e(()=>[...o[16]||(o[16]=[s("span",{class:"nav-icon"},"ğŸ”",-1),s("span",{class:"nav-text"},"Audit Logs",-1)])]),_:1}),t(n,{to:"/admin/settings",class:"nav-item"},{default:e(()=>[...o[17]||(o[17]=[s("span",{class:"nav-icon"},"âš™ï¸",-1),s("span",{class:"nav-text"},"Settings",-1)])]),_:1})])]),s("main",B,[t(k)])])])}const R=_(P,[["render",O],["__scopeId","data-v-f1238a6a"]]);export{R as default};
