import{r as w,H as G,c as Q,o as ne,g as E,b as d,p as e,s as k,x as r,A as U,y as c,D as X,t as o,F as I,C as T,v as A,q as $,f as u,z as ie,B as re}from"./vendor-COruVTVJ.js";import{_ as de}from"./index-Djdf6BKf.js";const ue={class:"payslip-generation"},pe={class:"app-header"},me={class:"header-actions"},ve={class:"filter-controls-card"},ce={class:"filter-group-container"},ye={class:"filter-group"},_e={key:0,class:"filter-group"},be={key:1,class:"filter-group"},fe={class:"filter-group"},ge={class:"filter-group"},we={key:0,class:"state-indicator loading-state"},he={key:1,class:"state-indicator error-state"},ke={key:2,class:"payslips-dashboard-grid"},Pe={key:0,class:"payslip-grid-container"},Ce={class:"card-header-status"},xe={class:"employee-name"},De={class:"employee-meta"},Ve={class:"payslip-summary-details"},Se={class:"detail-pair"},Ee={class:"detail-value"},Ue={class:"detail-pair"},Ae={class:"detail-value"},Fe={class:"detail-pair net-pay-row"},Ke={class:"detail-net-pay"},Me={class:"detail-pair"},Ie={class:"detail-value"},Te={class:"card-actions-footer"},$e=["onClick"],Be=["onClick"],Ne=["onClick"],He={key:1,class:"state-indicator empty-state"},ze={class:"modal-card"},Ge={class:"form-group required"},qe=["value"],Le={class:"form-row-grid"},Re={class:"form-group required"},Oe={class:"form-group required"},Ye={class:"form-group required"},je={class:"form-section-group"},Ze={class:"form-row-grid grid-col-2"},We={class:"form-group"},Je={class:"form-group"},Qe={class:"form-group"},Xe={class:"form-group"},et={class:"form-group"},tt={class:"form-group"},st={class:"form-section-group"},lt={class:"form-row-grid grid-col-2"},at={class:"form-group"},ot={class:"form-group"},nt={class:"form-group"},it={class:"form-group"},rt={class:"summary-preview-card"},dt={class:"summary-row"},ut={class:"summary-amount positive"},pt={class:"summary-row"},mt={class:"summary-amount negative"},vt={class:"summary-row total-row"},ct={class:"summary-amount net-pay-final"},yt={key:0,class:"form-alert-error"},_t={class:"modal-footer"},bt=["disabled"],ft={class:"modal-card"},gt={class:"form-row-grid grid-col-2"},wt={class:"form-group required"},ht={class:"form-group required"},kt={class:"form-group required"},Pt={class:"form-group"},Ct={class:"form-section-group employee-selection-area"},xt={class:"selection-title"},Dt={class:"employee-tag-list"},Vt=["onClick"],St={key:0,class:"selection-hint"},Et={class:"employees-checkbox-list"},Ut=["value"],At={class:"employee-details"},Ft={class:"employee-name-label"},Kt={class:"employee-dept-label"},Mt={class:"modal-footer"},It=["disabled"],Tt={class:"modal-card large-modal"},$t={class:"modal-header"},Bt={class:"modal-title"},Nt={class:"payslip-detail-view"},Ht={class:"payslip-detail__header"},zt={class:"payslip-title"},Gt={class:"payslip-detail__employee-info"},qt={class:"info-grid"},Lt={class:"info-item"},Rt={class:"info-item"},Ot={class:"info-item"},Yt={class:"info-item"},jt={class:"payslip-detail__earnings-deductions"},Zt={class:"earnings-section"},Wt={class:"amount-list"},Jt={class:"amount-item"},Qt={class:"amount-item"},Xt={class:"amount-item"},es={class:"amount-item"},ts={class:"amount-item"},ss={class:"amount-item total"},ls={class:"deductions-section"},as={class:"amount-list"},os={class:"amount-item"},ns={class:"amount-item"},is={class:"amount-item"},rs={class:"amount-item"},ds={class:"amount-item total"},us={class:"payslip-detail__net-pay-summary"},ps={class:"net-pay-visual-card"},ms={class:"net-pay-amount"},vs={class:"net-pay-words"},cs={class:"modal-footer print-actions"},ys={__name:"PayslipGeneration",setup(_s,{expose:ee}){const B=w(!1),F=w(null),h=w([]),P=w([]),n=w(null),K=w(!1),N=w(!1),_=w(!1),b=w(null),p=G({pay_period:"current",department:"",status:"",custom_start:"",custom_end:""}),a=G({employee_id:"",pay_period_start:"",pay_period_end:"",payment_date:"",basic_salary:0,house_allowance:0,transport_allowance:0,other_allowances:0,overtime_hours:0,overtime_rate:0,napsa:0,paye:0,nhima:0,other_deductions:0,generate_pdf:!0}),i=G({pay_period_start:"",pay_period_end:"",payment_date:"",department:"",employee_ids:[]}),te=l=>{const t=P.value.find(s=>s.id===parseInt(l));t&&t.base_salary&&(a.basic_salary=parseFloat(t.base_salary))},se=Q(()=>P.value.filter(l=>!i.department||l.department===i.department)),H=Q(()=>P.value.filter(l=>i.employee_ids.includes(l.id))),D=l=>{const t=(l.overtime_hours||0)*(l.overtime_rate||0);return(l.basic_salary||0)+(l.house_allowance||0)+(l.transport_allowance||0)+(l.other_allowances||0)+t},V=l=>(l.napsa||0)+(l.paye||0)+(l.nhima||0)+(l.other_deductions||0),y=()=>D(a)-V(a),M=l=>l.first_name&&l.last_name?`${l.first_name} ${l.last_name}`.trim():l.user&&l.user.first_name?`${l.user.first_name} ${l.user.last_name||""}`.trim():l.name?l.name:l.full_name?l.full_name:"N/A";ne(()=>{le(),C(),ae()});const le=()=>{const l=new Date,t=new Date(l.getFullYear(),l.getMonth(),1),s=new Date(l.getFullYear(),l.getMonth()+1,0);a.pay_period_start=S(t),a.pay_period_end=S(s),a.payment_date=S(l),i.pay_period_start=S(t),i.pay_period_end=S(s),i.payment_date=S(l)},C=async()=>{B.value=!0,F.value=null;try{const l=new URLSearchParams;p.pay_period==="custom"?(l.append("start",p.custom_start),l.append("end",p.custom_end)):l.append("pay_period",p.pay_period),p.department&&l.append("department",p.department),p.status&&l.append("status",p.status);const t=await E.get("/api/admin/payslips",{params:l});h.value=t.data.data||t.data}catch(l){F.value="Failed to fetch payslips",console.error(l)}finally{B.value=!1}},ae=async()=>{try{console.log("Fetching employees...");const l=await E.get("/api/admin/employees");console.log("Employees response:",l.data);let t=[];l.data&&l.data.employees?t=l.data.employees:l.data&&l.data.data?t=l.data.data:t=l.data||[],P.value=t,console.log("Processed employees:",P.value)}catch(l){console.error("Failed to fetch employees:",l)}},q=async()=>{var l,t;if(_.value=!0,b.value=null,!a.employee_id||!a.pay_period_start||!a.pay_period_end||!a.payment_date||a.basic_salary<=0){b.value="Please fill in all required fields correctly.",_.value=!1;return}try{const s={...a,employee_id:a.employee_id.toString(),gross_salary:D(a),total_deductions:V(a),net_pay:y(),overtime_pay:(a.overtime_hours||0)*(a.overtime_rate||0)},m=await E.post("/api/admin/payslips",s);h.value.unshift(m.data.data||m.data),f()}catch(s){b.value=((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to generate payslip",console.error(s)}finally{_.value=!1}},L=async()=>{if(_.value=!0,b.value=null,i.employee_ids.length===0){b.value="Please select at least one employee.",_.value=!1;return}try{const l=i.employee_ids.map(async m=>{const W=P.value.find(oe=>oe.id===m);if(!W)return null;const g={employee_id:m.toString(),pay_period_start:i.pay_period_start,pay_period_end:i.pay_period_end,payment_date:i.payment_date,basic_salary:parseFloat(W.base_salary)||0,house_allowance:0,transport_allowance:0,other_allowances:0,overtime_hours:0,overtime_rate:0,napsa:0,paye:0,nhima:0,other_deductions:0,generate_pdf:!0};g.gross_salary=D(g),g.total_deductions=V(g),g.net_pay=g.gross_salary-g.total_deductions,g.overtime_pay=0;const J=await E.post("/api/admin/payslips",g);return J.data.data||J.data}),s=(await Promise.all(l)).filter(Boolean);h.value.unshift(...s),f()}catch(l){b.value="Failed to generate payslips",console.error(l)}finally{_.value=!1}},R=l=>{n.value=l},z=async l=>{try{const t=await E.get(`/api/payslips/${l.id}/download`,{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),m=document.createElement("a");m.href=s,m.setAttribute("download",`payslip-${l.id}.pdf`),document.body.appendChild(m),m.click(),m.remove(),window.URL.revokeObjectURL(s)}catch(t){console.error("Failed to download payslip:",t),alert("Failed to download payslip")}},O=async l=>{try{await E.post(`/api/payslips/${l.id}/send`);const t=h.value.findIndex(s=>s.id===l.id);t!==-1&&(h.value[t].status="paid",h.value[t].is_sent=!0),alert(`Payslip sent to ${l.employee_name} successfully!`)}catch(t){console.error("Failed to send payslip:",t),alert("Failed to send payslip")}},Y=l=>{i.employee_ids=i.employee_ids.filter(t=>t!==l)},f=()=>{K.value=!1,N.value=!1,b.value=null,Object.assign(a,{employee_id:"",basic_salary:0,house_allowance:0,transport_allowance:0,other_allowances:0,overtime_hours:0,overtime_rate:0,napsa:0,paye:0,nhima:0,other_deductions:0}),i.employee_ids=[]},v=l=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(l||0),x=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",S=l=>l.toISOString().split("T")[0],j=l=>({draft:"Draft",generated:"Generated",paid:"Paid"})[l]||l,Z=l=>{if(l===0)return"Zero Kwacha Only";const t=Math.floor(l),s=Math.round((l-t)*100);let m=`${v(t)} Kwacha`;return s>0&&(m+=` and ${s} Ngwee`),m+" Only"};return ee({fetchPayslips:C,generatePayslip:q,bulkGeneratePayslips:L,viewPayslip:R,downloadPayslip:z,sendPayslip:O,removeEmployee:Y,closeModals:f,calculateNetPay:y,calculateTotalEarnings:D,calculateTotalDeductions:V,formatNumber:v,formatDate:x,formatStatus:j,convertToWords:Z,calculatePayslipEarnings:D,calculatePayslipDeductions:V,getEmployeeName:M}),(l,t)=>(u(),d("div",ue,[e("header",pe,[t[33]||(t[33]=e("div",{class:"header-content"},[e("h1",{class:"header-title"},"Eagle pay Zambia"),e("p",{class:"header-subtitle"},"Generate and manage employee payslips for castle holdings")],-1)),e("div",me,[e("button",{onClick:t[0]||(t[0]=s=>N.value=!0),class:"btn-secondary-icon"},[...t[31]||(t[31]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 11.586V3a1 1 0 112 0v8.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),e("span",null,"Bulk Generate",-1)])]),e("button",{onClick:t[1]||(t[1]=s=>K.value=!0),class:"btn-primary-icon"},[...t[32]||(t[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),e("span",null,"Generate Payslip",-1)])])])]),e("div",ve,[e("div",ce,[e("div",ye,[t[35]||(t[35]=e("label",{class:"filter-label"},"Pay Period",-1)),r(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>p.pay_period=s),onChange:C,class:"select-input"},[...t[34]||(t[34]=[e("option",{value:"current"},"Current Month",-1),e("option",{value:"last"},"Last Month",-1),e("option",{value:"custom"},"Custom Range",-1)])],544),[[U,p.pay_period]])]),p.pay_period==="custom"?(u(),d("div",_e,[t[36]||(t[36]=e("label",{class:"filter-label"},"From",-1)),r(e("input",{type:"month","onUpdate:modelValue":t[3]||(t[3]=s=>p.custom_start=s),onChange:C,class:"date-input"},null,544),[[c,p.custom_start]])])):k("",!0),p.pay_period==="custom"?(u(),d("div",be,[t[37]||(t[37]=e("label",{class:"filter-label"},"To",-1)),r(e("input",{type:"month","onUpdate:modelValue":t[4]||(t[4]=s=>p.custom_end=s),onChange:C,class:"date-input"},null,544),[[c,p.custom_end]])])):k("",!0),e("div",fe,[t[39]||(t[39]=e("label",{class:"filter-label"},"Department",-1)),r(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>p.department=s),onChange:C,class:"select-input"},[...t[38]||(t[38]=[X('<option value="" data-v-ae142c8f>All Departments</option><option value="IT" data-v-ae142c8f>IT</option><option value="HR" data-v-ae142c8f>HR</option><option value="Finance" data-v-ae142c8f>Finance</option><option value="Sales" data-v-ae142c8f>Sales</option>',5)])],544),[[U,p.department]])]),e("div",ge,[t[41]||(t[41]=e("label",{class:"filter-label"},"Status",-1)),r(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>p.status=s),onChange:C,class:"select-input"},[...t[40]||(t[40]=[e("option",{value:""},"All Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"generated"},"Generated",-1),e("option",{value:"paid"},"Paid",-1)])],544),[[U,p.status]])])])]),B.value?(u(),d("div",we,[...t[42]||(t[42]=[e("div",{class:"spinner"},null,-1),e("p",null,"Fetching the latest payslip records...",-1)])])):F.value?(u(),d("div",he,o(F.value),1)):(u(),d("div",ke,[h.value.length>0?(u(),d("div",Pe,[(u(!0),d(I,null,T(h.value,s=>(u(),d("div",{key:s.id,class:"payslip-item-card"},[e("div",Ce,[e("h3",xe,o(s.employee_name),1),e("span",{class:ie(["status-badge",`status-${s.status}`])},o(j(s.status)),3)]),e("p",De,o(s.employee_id)+" | "+o(s.department),1),e("div",Ve,[e("div",Se,[t[43]||(t[43]=e("span",{class:"detail-label"},"Period:",-1)),e("span",Ee,o(x(s.pay_period_start))+" - "+o(x(s.pay_period_end)),1)]),e("div",Ue,[t[44]||(t[44]=e("span",{class:"detail-label"},"Basic Salary:",-1)),e("span",Ae,"K"+o(v(s.basic_salary)),1)]),e("div",Fe,[t[45]||(t[45]=e("span",{class:"detail-label"},"Net Pay:",-1)),e("span",Ke,"K"+o(v(s.net_pay)),1)]),e("div",Me,[t[46]||(t[46]=e("span",{class:"detail-label"},"Payment Date:",-1)),e("span",Ie,o(x(s.payment_date)),1)])]),e("div",Te,[e("button",{onClick:m=>R(s),class:"btn-link-icon"},[...t[47]||(t[47]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1),e("span",null,"View",-1)])],8,$e),e("button",{onClick:m=>z(s),class:"btn-link-icon"},[...t[48]||(t[48]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 11.586V3a1 1 0 112 0v8.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),e("span",null,"Download",-1)])],8,Be),s.status==="draft"||s.status==="generated"?(u(),d("button",{key:0,onClick:m=>O(s),class:"btn-link-icon btn-send"},[...t[49]||(t[49]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})],-1),e("span",null,"Send",-1)])],8,Ne)):k("",!0)])]))),128))])):(u(),d("div",He,[t[50]||(t[50]=e("p",{class:"empty-message"},"No payslips found for the current filters. Try adjusting your criteria or generating a new one.",-1)),e("button",{onClick:t[7]||(t[7]=s=>K.value=!0),class:"btn-primary-icon"},"Generate First Payslip")]))])),K.value?(u(),d("div",{key:3,class:"modal-overlay",onClick:A(f,["self"])},[e("div",ze,[e("div",{class:"modal-header"},[t[51]||(t[51]=e("h2",{class:"modal-title"},"Generate Single Payslip",-1)),e("button",{onClick:f,class:"close-btn","aria-label":"Close modal"},"✕")]),e("form",{onSubmit:A(q,["prevent"]),class:"modal-body-content"},[e("div",Ge,[t[53]||(t[53]=e("label",{class:"form-label"},"Employee",-1)),r(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>a.employee_id=s),onChange:t[9]||(t[9]=s=>te(s.target.value)),required:"",class:"select-input"},[t[52]||(t[52]=e("option",{value:"",disabled:""},"Select Employee",-1)),(u(!0),d(I,null,T(P.value,s=>(u(),d("option",{key:s.id,value:s.id},o(M(s))+" (ID: "+o(s.id)+") ",9,qe))),128))],544),[[U,a.employee_id]])]),e("div",Le,[e("div",Re,[t[54]||(t[54]=e("label",{class:"form-label"},"Pay Period Start",-1)),r(e("input",{type:"date","onUpdate:modelValue":t[10]||(t[10]=s=>a.pay_period_start=s),required:"",class:"text-input"},null,512),[[c,a.pay_period_start]])]),e("div",Oe,[t[55]||(t[55]=e("label",{class:"form-label"},"Pay Period End",-1)),r(e("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=s=>a.pay_period_end=s),required:"",class:"text-input"},null,512),[[c,a.pay_period_end]])]),e("div",Ye,[t[56]||(t[56]=e("label",{class:"form-label"},"Payment Date",-1)),r(e("input",{type:"date","onUpdate:modelValue":t[12]||(t[12]=s=>a.payment_date=s),required:"",class:"text-input"},null,512),[[c,a.payment_date]])])]),e("div",je,[t[63]||(t[63]=e("h3",{class:"section-title"},"Earnings",-1)),e("div",Ze,[e("div",We,[t[57]||(t[57]=e("label",{class:"form-label"},"Basic Salary (K)",-1)),r(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[13]||(t[13]=s=>a.basic_salary=s),onInput:y,class:"text-input"},null,544),[[c,a.basic_salary,void 0,{number:!0}]])]),e("div",Je,[t[58]||(t[58]=e("label",{class:"form-label"},"House Allowance (K)",-1)),r(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[14]||(t[14]=s=>a.house_allowance=s),onInput:y,class:"text-input"},null,544),[[c,a.house_allowance,void 0,{number:!0}]])]),e("div",Qe,[t[59]||(t[59]=e("label",{class:"form-label"},"Transport Allowance (K)",-1)),r(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[15]||(t[15]=s=>a.transport_allowance=s),onInput:y,class:"text-input"},null,544),[[c,a.transport_allowance,void 0,{number:!0}]])]),e("div",Xe,[t[60]||(t[60]=e("label",{class:"form-label"},"Other Allowances (K)",-1)),r(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[16]||(t[16]=s=>a.other_allowances=s),onInput:y,class:"text-input"},null,544),[[c,a.other_allowances,void 0,{number:!0}]])]),e("div",et,[t[61]||(t[61]=e("label",{class:"form-label"},"Overtime Hours",-1)),r(e("input",{type:"number",step:"0.1","onUpdate:modelValue":t[17]||(t[17]=s=>a.overtime_hours=s),onInput:y,class:"text-input"},null,544),[[c,a.overtime_hours,void 0,{number:!0}]])]),e("div",tt,[t[62]||(t[62]=e("label",{class:"form-label"},"Overtime Rate (K/hour)",-1)),r(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[18]||(t[18]=s=>a.overtime_rate=s),onInput:y,class:"text-input"},null,544),[[c,a.overtime_rate,void 0,{number:!0}]])])])]),e("div",st,[t[68]||(t[68]=e("h3",{class:"section-title"},"Deductions",-1)),e("div",lt,[e("div",at,[t[64]||(t[64]=e("label",{class:"form-label"},"NAPSA Contribution (K)",-1)),r(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[19]||(t[19]=s=>a.napsa=s),onInput:y,class:"text-input"},null,544),[[c,a.napsa,void 0,{number:!0}]])]),e("div",ot,[t[65]||(t[65]=e("label",{class:"form-label"},"PAYE Tax (K)",-1)),r(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[20]||(t[20]=s=>a.paye=s),onInput:y,class:"text-input"},null,544),[[c,a.paye,void 0,{number:!0}]])]),e("div",nt,[t[66]||(t[66]=e("label",{class:"form-label"},"NHIMA Contribution (K)",-1)),r(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[21]||(t[21]=s=>a.nhima=s),onInput:y,class:"text-input"},null,544),[[c,a.nhima,void 0,{number:!0}]])]),e("div",it,[t[67]||(t[67]=e("label",{class:"form-label"},"Other Deductions (K)",-1)),r(e("input",{type:"number",step:"0.01","onUpdate:modelValue":t[22]||(t[22]=s=>a.other_deductions=s),onInput:y,class:"text-input"},null,544),[[c,a.other_deductions,void 0,{number:!0}]])])])]),e("div",rt,[t[72]||(t[72]=e("h4",{class:"summary-title"},"Calculation Summary",-1)),e("div",dt,[t[69]||(t[69]=e("span",{class:"summary-label"},"Total Earnings:",-1)),e("span",ut,"K"+o(v(D(a))),1)]),e("div",pt,[t[70]||(t[70]=e("span",{class:"summary-label"},"Total Deductions:",-1)),e("span",mt,"K"+o(v(V(a))),1)]),e("div",vt,[t[71]||(t[71]=e("span",{class:"summary-label"},"Net Pay:",-1)),e("span",ct,"K"+o(v(y())),1)])]),b.value?(u(),d("div",yt,o(b.value),1)):k("",!0),e("div",_t,[e("button",{type:"button",onClick:f,class:"btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn-primary",disabled:_.value},o(_.value?"Generating...":"Generate Payslip"),9,bt)])],32)])])):k("",!0),N.value?(u(),d("div",{key:4,class:"modal-overlay",onClick:A(f,["self"])},[e("div",ft,[e("div",{class:"modal-header"},[t[73]||(t[73]=e("h2",{class:"modal-title"},"Bulk Generate Payslips",-1)),e("button",{onClick:f,class:"close-btn","aria-label":"Close modal"},"✕")]),e("form",{onSubmit:A(L,["prevent"]),class:"modal-body-content"},[e("div",gt,[e("div",wt,[t[74]||(t[74]=e("label",{class:"form-label"},"Pay Period Start",-1)),r(e("input",{type:"date","onUpdate:modelValue":t[23]||(t[23]=s=>i.pay_period_start=s),required:"",class:"text-input"},null,512),[[c,i.pay_period_start]])]),e("div",ht,[t[75]||(t[75]=e("label",{class:"form-label"},"Pay Period End",-1)),r(e("input",{type:"date","onUpdate:modelValue":t[24]||(t[24]=s=>i.pay_period_end=s),required:"",class:"text-input"},null,512),[[c,i.pay_period_end]])])]),e("div",kt,[t[76]||(t[76]=e("label",{class:"form-label"},"Payment Date",-1)),r(e("input",{type:"date","onUpdate:modelValue":t[25]||(t[25]=s=>i.payment_date=s),required:"",class:"text-input"},null,512),[[c,i.payment_date]])]),e("div",Pt,[t[78]||(t[78]=e("label",{class:"form-label"},"Filter by Department",-1)),r(e("select",{"onUpdate:modelValue":t[26]||(t[26]=s=>i.department=s),class:"select-input"},[...t[77]||(t[77]=[X('<option value="" data-v-ae142c8f>All Departments</option><option value="IT" data-v-ae142c8f>IT</option><option value="HR" data-v-ae142c8f>HR</option><option value="Finance" data-v-ae142c8f>Finance</option><option value="Sales" data-v-ae142c8f>Sales</option><option value="Administration" data-v-ae142c8f>Administration</option>',6)])],512),[[U,i.department]])]),e("div",Ct,[e("h4",xt,"Selected Employees ("+o(H.value.length)+")",1),e("div",Dt,[(u(!0),d(I,null,T(H.value,s=>(u(),d("span",{key:s.id,class:"employee-tag-pill"},[$(o(M(s))+" ",1),e("button",{type:"button",onClick:m=>Y(s.id),class:"remove-tag-btn","aria-label":"Remove employee"},"✕",8,Vt)]))),128)),H.value.length===0?(u(),d("p",St,"Select employees below to include them.")):k("",!0)]),t[79]||(t[79]=e("h4",{class:"selection-title"},"Available Employees",-1)),e("div",Et,[(u(!0),d(I,null,T(se.value,s=>(u(),d("label",{key:s.id,class:"checkbox-label-card"},[r(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[27]||(t[27]=m=>i.employee_ids=m),class:"checkbox-input"},null,8,Ut),[[re,i.employee_ids]]),e("div",At,[e("span",Ft,o(M(s)),1),e("span",Kt,"("+o(s.department)+")",1)])]))),128))])]),e("div",Mt,[e("button",{type:"button",onClick:f,class:"btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn-primary",disabled:_.value||i.employee_ids.length===0},o(_.value?"Generating...":`Generate ${i.employee_ids.length} Payslips`),9,It)])],32)])])):k("",!0),n.value?(u(),d("div",{key:5,class:"modal-overlay",onClick:t[30]||(t[30]=A(s=>n.value=null,["self"]))},[e("div",Tt,[e("div",$t,[e("h2",Bt,"Payslip for "+o(n.value.employee_name),1),e("button",{onClick:t[28]||(t[28]=s=>n.value=null),class:"close-btn","aria-label":"Close payslip view"},"✕")]),e("div",Nt,[e("header",Ht,[t[81]||(t[81]=e("div",{class:"company-info"},[e("h2",null,"Castle Holdings Ltd"),e("p",null,"54 Seble Road, Lusaka, Zambia"),e("p",null,"Phone: +260 211 123456 | Email: payroll@archangel.co.zm")],-1)),e("div",zt,[t[80]||(t[80]=e("h1",null,"PAYSLIP",-1)),e("p",null,"Period: "+o(x(n.value.pay_period_start))+" to "+o(x(n.value.pay_period_end)),1)])]),e("div",Gt,[t[86]||(t[86]=e("h3",{class:"info-section__title"},"Employee Details",-1)),e("div",qt,[e("div",Lt,[t[82]||(t[82]=e("label",null,"Name:",-1)),e("span",null,o(n.value.employee_name),1)]),e("div",Rt,[t[83]||(t[83]=e("label",null,"Employee ID:",-1)),e("span",null,o(n.value.employee_id),1)]),e("div",Ot,[t[84]||(t[84]=e("label",null,"Department:",-1)),e("span",null,o(n.value.department),1)]),e("div",Yt,[t[85]||(t[85]=e("label",null,"Payment Date:",-1)),e("span",null,o(x(n.value.payment_date)),1)])])]),e("div",jt,[e("section",Zt,[t[92]||(t[92]=e("h3",{class:"section-title"},"Earnings",-1)),e("div",Wt,[e("div",Jt,[t[87]||(t[87]=e("label",null,"Basic Salary:",-1)),e("span",null,"K"+o(v(n.value.basic_salary||0)),1)]),e("div",Qt,[t[88]||(t[88]=e("label",null,"House Allowance:",-1)),e("span",null,"K"+o(v(n.value.house_allowance||0)),1)]),e("div",Xt,[t[89]||(t[89]=e("label",null,"Transport Allowance:",-1)),e("span",null,"K"+o(v(n.value.transport_allowance||0)),1)]),e("div",es,[t[90]||(t[90]=e("label",null,"Other Allowances:",-1)),e("span",null,"K"+o(v(n.value.other_allowances||0)),1)]),e("div",ts,[e("label",null,"Overtime Pay ("+o(n.value.overtime_hours||0)+" hrs):",1),e("span",null,"K"+o(v((n.value.overtime_hours||0)*(n.value.overtime_rate||0))),1)]),e("div",ss,[t[91]||(t[91]=e("label",null,"Gross Earnings:",-1)),e("span",null,"K"+o(v(l.calculatePayslipEarnings(n.value))),1)])])]),e("section",ls,[t[99]||(t[99]=e("h3",{class:"section-title"},"Deductions",-1)),e("div",as,[e("div",os,[t[93]||(t[93]=e("label",null,"NAPSA (5%):",-1)),e("span",null,"K"+o(v(n.value.napsa||0)),1)]),e("div",ns,[t[94]||(t[94]=e("label",null,"PAYE Tax:",-1)),e("span",null,"K"+o(v(n.value.paye||0)),1)]),e("div",is,[t[95]||(t[95]=e("label",null,"NHIMA (1%):",-1)),e("span",null,"K"+o(v(n.value.nhima||0)),1)]),e("div",rs,[t[96]||(t[96]=e("label",null,"Other Deductions:",-1)),e("span",null,"K"+o(v(n.value.other_deductions||0)),1)]),t[98]||(t[98]=e("div",{class:"amount-item filler-item"},null,-1)),e("div",ds,[t[97]||(t[97]=e("label",null,"Total Deductions:",-1)),e("span",null,"K"+o(v(l.calculatePayslipDeductions(n.value))),1)])])])]),e("div",us,[e("div",ps,[t[100]||(t[100]=e("h2",null,"NET PAYABLE",-1)),e("div",ms,"K"+o(v(n.value.net_pay)),1),e("p",vs,"("+o(Z(n.value.net_pay))+")",1)])]),t[101]||(t[101]=e("footer",{class:"payslip-detail__footer"},[e("div",{class:"signature-block"},[e("div",{class:"signature-line"}),e("p",null,"Authorized Signature")]),e("div",{class:"notes-block"},[e("p",null,[e("strong",null,"Notes:"),$(" This is a computer-generated payslip. Please contact HR for any discrepancies.")])])],-1))]),e("div",cs,[e("button",{onClick:t[29]||(t[29]=s=>z(n.value)),class:"btn-secondary-icon"},[...t[102]||(t[102]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 11.586V3a1 1 0 112 0v8.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),$(" Download PDF ",-1)])]),t[103]||(t[103]=e("button",{onclick:"window.print()",class:"btn-primary-icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5 4v3H3v5h14V7h-2V4h-7V3H5zm0 14h10a1 1 0 001-1V9H4v8a1 1 0 001 1z","clip-rule":"evenodd"})]),$(" Print ")],-1))])])])):k("",!0)]))}},gs=de(ys,[["__scopeId","data-v-ae142c8f"]]);export{gs as default};
