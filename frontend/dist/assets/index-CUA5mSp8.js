const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-oaJAzkwk.js","assets/vendor-CFHPe_rb.js","assets/Login-3c47Kpas.css","assets/Register-Djia7RT3.js","assets/Register-HnCMei_d.css","assets/ForgotPassword-BUyVE188.js","assets/ForgotPassword-JgkzK2KZ.css","assets/ResetPassword-CzJ43_7z.js","assets/ResetPassword-BN1Ks_H0.css","assets/EmployeeLayout-CHFV4ISD.js","assets/Toggle-BIGgGeHO.js","assets/Toggle-CQUmg5AM.css","assets/EmployeeLayout-DzqNRts7.css","assets/Dashboard-BgzJt0_b.js","assets/Dashboard-C-WeJMrP.css","assets/Attendance-4iidTvic.js","assets/Attendance-Dry_WsqK.css","assets/Leaves-BTNjC0mj.js","assets/Leaves-Ch2rLybm.css","assets/ApplyLeave-BEQc9lkk.js","assets/ApplyLeave-CBtnfJsW.css","assets/Payslips-DdJsD-vf.js","assets/Payslips-oCrESm48.css","assets/Profile-DDYJzRYF.js","assets/Profile-DHldSkq0.css","assets/TaskAssigned-CfHWhVVS.js","assets/TaskBoard-CsIgVBW7.js","assets/TaskBoard-DrnGRv1W.css","assets/TaskAssigned-tou41XIT.css","assets/ManagerLayout-B3TzfuyL.js","assets/ManagerLayout-7b5Lp20Z.css","assets/Dashboard-PAFY44p1.js","assets/Dashboard-BTiWECj_.css","assets/EmployeeList-vWkGvpcH.js","assets/EmployeeList-CpQNFk12.css","assets/AttendanceMonitor-C54JZzwy.js","assets/AttendanceMonitor-B-iA4kHx.css","assets/LeaveApprovals-BWMK5_Ic.js","assets/LeaveApprovals-Da5SNGAG.css","assets/TeamReports-sBpWjEr0.js","assets/TeamReports-BbLzrrkv.css","assets/ProductivityMonitor-DmyGl7oB.js","assets/ProductivityMonitor-BJ0LDHj_.css","assets/Profile-BgwtBAgX.js","assets/Profile-D8L8qjFQ.css","assets/Payslips-DXpCHUQd.js","assets/Payslips-CrgT56AR.css","assets/TaskForm-BGnMBiXS.js","assets/TaskForm-Cuy0iiZS.css","assets/AdminLayout-Dd6-XRln.js","assets/AdminLayout-BuiQ7PV0.css","assets/Dashboard-b14tyY6Y.js","assets/Dashboard-Dkkct8MS.css","assets/EmployeeManagement-DU8C3i4p.js","assets/EmployeeManagement-CDqQyEuO.css","assets/PayrollProcessing-DCwczl99.js","assets/PayrollProcessing-NeHc1d_N.css","assets/PayslipGeneration-B4tEjZVK.js","assets/PayslipGeneration-W1S7UiuM.css","assets/TaxConfiguration-pzCAgb3x.js","assets/TaxConfiguration-DADUD8yl.css","assets/Reports-D25qNI0f.js","assets/Reports-Cv8BsJG8.css","assets/AuditLogs-3VQTTl1B.js","assets/AuditLogs-BQqKf3l6.css","assets/LeaveManagement-CqJesQ5U.js","assets/LeaveManagement-ChnAdVW0.css","assets/AttendanceMonitor-DL9P2v1z.js","assets/AttendanceMonitor-MfeX-qKM.css","assets/Settings-CLsvVPjk.js","assets/Settings-D3Zlc7Ti.css","assets/Unauthorized-BcfKab7E.js","assets/Unauthorized-CjVdvr7g.css","assets/NotFound-OBVKhRGD.js","assets/NotFound-DhzjMYmC.css"])))=>i.map(i=>d[i]);
import{d as se,r as C,c as T,o as le,a as _,T as ce,m as ue,F as ee,i as pe,b as de,e as me,f as fe,g as P,h as he,u as ve,j as _e,k as ge,l as ye,n as Ee}from"./vendor-CFHPe_rb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function o(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=o(a);fetch(a.href,c)}})();(function(){var e;try{if(typeof document<"u"){var t=document.createElement("style");t.nonce=(e=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:e.content,t.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:#fff;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44a4fc;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#e54d42;border-left-color:#b82e24}.vue-notification.success{background:#68cd86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(t)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();const re=new Map;function Ae(e){return{all:e=e||new Map,on:function(t,o){var r=e.get(t);r?r.push(o):e.set(t,[o])},off:function(t,o){var r=e.get(t);r&&(o?r.splice(r.indexOf(o)>>>0,1):e.set(t,[]))},emit:function(t,o){var r=e.get(t);r&&r.slice().map(function(a){a(o)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,o)})}}}const U=Ae(),W="[-+]?[0-9]*.?[0-9]+",te=[{name:"px",regexp:new RegExp(`^${W}px$`)},{name:"%",regexp:new RegExp(`^${W}%$`)},{name:"px",regexp:new RegExp(`^${W}$`)}],Te=e=>{if(e==="auto")return{type:e,value:0};for(let t=0;t<te.length;t++){const o=te[t];if(o.regexp.test(e))return{type:o.name,value:parseFloat(e)}}return{type:"",value:e}},Pe=e=>{switch(typeof e){case"number":return{type:"px",value:e};case"string":return Te(e);default:return{type:"",value:e}}},oe={x:new Set(["left","center","right"]),y:new Set(["top","bottom"])},Oe=(e=>()=>e++)(0),we=e=>typeof e!="string"?[]:e.split(/\s+/gi).filter(Boolean),Re=e=>{typeof e=="string"&&(e=we(e));let t=null,o=null;return e.forEach(r=>{oe.y.has(r)&&(o=r),oe.x.has(r)&&(t=r)}),{x:t,y:o}},J={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:e=>({height:[e.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},be=(e,t)=>{let o,r,a=t;const c=()=>{r=Date.now(),o=setTimeout(e,a)},u=()=>{clearTimeout(o),a-=Date.now()-r};return c(),{start:c,stop:u}};function Le(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!pe(e)}const j={IDLE:0,DESTROYED:2},Ie=se({name:"notifications",props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:()=>J.position},classes:{type:[String,Array],default:"vue-notification"},animationType:{type:String,default:"css",validator(e){return e==="css"||e==="velocity"}},animation:{type:Object,default(){return J.velocityAnimation}},animationName:{type:String,default:J.cssAnimation},speed:{type:Number,default:300},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1},dangerouslySetInnerHtml:{type:Boolean,default:!1}},emits:{click:e=>!0,destroy:e=>!0,start:e=>!0},slots:Object,setup:(e,{emit:t,slots:o,expose:r})=>{const a=C([]),c=re.get("velocity"),u=T(()=>e.animationType==="velocity"),d=T(()=>a.value.filter(n=>n.state!==j.DESTROYED)),f=T(()=>Pe(e.width)),O=T(()=>{const{x:n,y:i}=Re(e.position),m=f.value.value,v=f.value.type,A={width:m+v};return i&&(A[i]="0px"),n&&(n==="center"?A.left=`calc(50% - ${+m/2}${v})`:A[n]="0px"),A}),D=T(()=>u.value?{onEnter:B,onLeave:V,onAfterLeave:E}:{}),h=n=>{t("click",n),e.closeOnClick&&w(n)},g=n=>{var i;e.pauseOnHover&&((i=n.timer)==null||i.stop())},y=n=>{var i;e.pauseOnHover&&((i=n.timer)==null||i.start())},x=(n={})=>{if(n.group||(n.group=""),n.data||(n.data={}),e.group!==n.group)return;if(n.clean||n.clear){q();return}const i=typeof n.duration=="number"?n.duration:e.duration,m=typeof n.speed=="number"?n.speed:e.speed,v=typeof n.ignoreDuplicates=="boolean"?n.ignoreDuplicates:e.ignoreDuplicates,{title:A,text:H,type:K,data:X,id:s}=n,p={id:s||Oe(),title:A,text:H,type:K,state:j.IDLE,speed:m,length:i+2*m,data:X,duplicates:0};i>=0&&(p.timer=be(()=>w(p),p.length));const R="bottom"in O.value,Y=e.reverse?!R:R;let M=-1;const Q=d.value.find(Z=>Z.title===n.title&&Z.text===n.text);if(v&&Q){Q.duplicates++;return}Y?(a.value.push(p),t("start",p),d.value.length>e.max&&(M=0)):(a.value.unshift(p),t("start",p),d.value.length>e.max&&(M=d.value.length-1)),M!==-1&&w(d.value[M])},N=n=>{$(n)},k=n=>["vue-notification-template",e.classes,n.type||""],F=n=>u.value?void 0:{transition:`all ${n.speed}ms`},w=n=>{var i;(i=n.timer)==null||i.stop(),n.state=j.DESTROYED,E(),t("destroy",n)},$=n=>{const i=a.value.find(m=>m.id===n);i&&w(i)},q=()=>{d.value.forEach(w)},L=(n,i)=>{var m;const v=(m=e.animation)==null?void 0:m[n];return typeof v=="function"?v(i):v},B=(n,i)=>{const m=L("enter",n);c(n,m,{duration:e.speed,complete:i})},V=(n,i)=>{const m=L("leave",n);c(n,m,{duration:e.speed,complete:i})};function E(){a.value=a.value.filter(n=>n.state!==j.DESTROYED)}return le(()=>{U.on("add",x),U.on("close",N)}),()=>{let n;return _("div",{class:"vue-notification-group",style:O.value},[_(ce,ue(D.value,{tag:"div",css:!u.value,name:e.animationName}),Le(n=d.value.map(i=>_("div",{key:i.id,class:"vue-notification-wrapper",style:F(i),"data-id":i.id,onMouseenter:()=>g(i),onMouseleave:()=>y(i)},[o.body?o.body({item:i,class:[e.classes,i.type],close:()=>w(i)}):_("div",{class:k(i),onClick:()=>h(i)},[e.dangerouslySetInnerHtml?_(ee,null,[i.title?_("div",{class:"notification-title",innerHTML:i.title},null):null,_("div",{class:"notification-content",innerHTML:i.text},null)]):_(ee,null,[i.title?_("div",{class:"notification-title"},[i.title]):null,_("div",{class:"notification-content"},[i.text])])])])))?n:{default:()=>[n]})])}}}),ae=e=>{typeof e=="string"&&(e={title:"",text:e}),typeof e=="object"&&U.emit("add",e)};ae.close=e=>{U.emit("close",e)};const Se="Notifications";function De(e,t={}){Object.entries(t).forEach(r=>re.set(...r));const o=t.name||"notify";e.config.globalProperties["$"+o]=ae,e.component(t.componentName||Se,Ie)}const xe={install:De},ke=(e,t)=>{const o=e.__vccOpts||e;for(const[r,a]of t)o[r]=a;return o},Ve={name:"App",created(){console.log("App initialized successfully")}},Ce={id:"app"};function Ne(e,t,o,r,a,c){const u=me("router-view");return fe(),de("div",Ce,[_(u)])}const Fe=ke(Ve,[["render",Ne]]),$e="modulepreload",Me=function(e){return"/"+e},ne={},l=function(t,o,r){let a=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(o.map(f=>{if(f=Me(f),f in ne)return;ne[f]=!0;const O=f.endsWith(".css"),D=O?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${D}`))return;const h=document.createElement("link");if(h.rel=O?"stylesheet":$e,O||(h.as="script"),h.crossOrigin="",h.href=f,d&&h.setAttribute("nonce",d),document.head.appendChild(h),O)return new Promise((g,y)=>{h.addEventListener("load",g),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${f}`)))})}))}function c(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return a.then(u=>{for(const d of u||[])d.status==="rejected"&&c(d.reason);return t().catch(c)})},ie="https://archangel.darth.cloud",b=P.create({baseURL:`${ie}/api`,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});b.interceptors.request.use(async e=>{var o,r;const t=S();if(t.token&&(e.headers.Authorization=`Bearer ${t.token}`),["post","put","patch","delete"].includes((o=e.method)==null?void 0:o.toLowerCase())){document.cookie.includes("XSRF-TOKEN")||await P.get(`${ie}/sanctum/csrf-cookie`,{withCredentials:!0});const a=(r=document.cookie.split("; ").find(c=>c.startsWith("XSRF-TOKEN=")))==null?void 0:r.split("=")[1];a&&(e.headers["X-XSRF-TOKEN"]=decodeURIComponent(a))}return e},e=>Promise.reject(e));b.interceptors.response.use(e=>e,e=>{var t,o,r,a;return((t=e.response)==null?void 0:t.status)===401&&(S().clearAuth(),window.location.href="/login"),((o=e.response)==null?void 0:o.status)===419&&(document.cookie.split(";").forEach(c=>{document.cookie=c.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),console.error("CSRF token mismatch. Please refresh and try again.")),((r=e.response)==null?void 0:r.status)===403&&console.error("Access forbidden:",e.response.data.message),((a=e.response)==null?void 0:a.status)===500&&console.error("Server error. Please try again later."),Promise.reject(e)});const I={login(e){return b.post("/login",e)},register(e){return b.post("/register",e)},logout(){return b.post("/logout")},getUser(){return b.get("/user")},forgotPassword(e){return b.post("/forgot-password",e)},resetPassword(e){return b.post("/reset-password",e)}},S=he("auth",()=>{const e=ve(),t=C(null),o=C(localStorage.getItem("token")),r=C(localStorage.getItem("tokenExpiry")),a=C(!1),c=T(()=>!!o.value&&!!t.value&&!x()),u=T(()=>{var s;return(s=t.value)==null?void 0:s.role}),d=T(()=>u.value==="admin"),f=T(()=>u.value==="manager"),O=T(()=>u.value==="employee"),D=24*60*60*1e3,h=2*60*60*1e3;let g=null,y=null;function x(){return r.value?Date.now()>parseInt(r.value):!1}function N(){const s=Date.now()+D;r.value=s.toString(),localStorage.setItem("tokenExpiry",r.value)}function k(){g&&clearTimeout(g),c.value&&(g=setTimeout(()=>{console.log("Auto-logout due to inactivity"),v()},h))}function F(){const s=["mousedown","keydown","scroll","touchstart","click"],p=()=>{c.value&&k()};s.forEach(R=>{window.addEventListener(R,p,{passive:!0})}),k()}function w(){g&&(clearTimeout(g),g=null)}function $(){y&&clearInterval(y),y=setInterval(()=>{x()&&(console.log("Token expired, logging out"),v())},60*1e3)}function q(){y&&(clearInterval(y),y=null)}function L(s){s?(P.defaults.headers.common.Authorization=`Bearer ${s}`,P.defaults.headers.common.Accept="application/json",P.defaults.headers.common["Content-Type"]="application/json"):delete P.defaults.headers.common.Authorization}async function B(){const s=localStorage.getItem("token"),p=localStorage.getItem("user"),R=localStorage.getItem("tokenExpiry");if(s&&p&&R){if(Date.now()>parseInt(R)){console.log("Stored token expired, clearing auth"),E();return}try{o.value=s,r.value=R,t.value=JSON.parse(p),L(o.value),F(),$(),await A(),console.log("Auth state restored successfully")}catch(Y){console.error("Failed to restore auth state:",Y),E()}}}function V(s,p){t.value=s,o.value=p,localStorage.setItem("token",p),localStorage.setItem("user",JSON.stringify(s)),N(),L(p),F(),$()}function E(){t.value=null,o.value=null,r.value=null,localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("tokenExpiry"),L(null),w(),q()}function n(s){return t.value?Array.isArray(s)?s.includes(t.value.role):t.value.role===s:!1}async function i(s){try{a.value=!0;const p=await I.login(s);return V(p.data.user,p.data.token),p}catch(p){throw E(),p}finally{a.value=!1}}async function m(s){try{a.value=!0;const p=await I.register(s);return V(p.data.user,p.data.token),p}catch(p){throw E(),p}finally{a.value=!1}}async function v(){try{await I.logout()}catch(s){console.error("Logout error:",s)}finally{E(),e.push({name:"login"})}}async function A(){if(o.value)try{const s=await I.getUser();t.value=s.data.user,localStorage.setItem("user",JSON.stringify(t.value)),N()}catch(s){throw E(),s}}async function H(s){return await I.forgotPassword({email:s})}async function K(s){return await I.resetPassword(s)}async function X(){if(c.value)try{await A(),console.log("Session refreshed")}catch(s){console.error("Failed to refresh session:",s)}}return o.value&&L(o.value),{user:t,token:o,tokenExpiry:r,isLoading:a,isAuthenticated:c,userRole:u,isAdmin:d,isManager:f,isEmployee:O,setAuth:V,clearAuth:E,hasRole:n,login:i,register:m,logout:v,fetchUser:A,forgotPassword:H,resetPassword:K,loadFromStorage:B,refreshSession:X,resetActivityTimer:k,isTokenExpired:x}}),je=[{path:"/auth",name:"AuthHome",redirect:"/auth/login",meta:{guestOnly:!0}},{path:"/auth/login",name:"Login",component:()=>l(()=>import("./Login-oaJAzkwk.js"),__vite__mapDeps([0,1,2])),meta:{guestOnly:!0}},{path:"/auth/register",name:"Register",component:()=>l(()=>import("./Register-Djia7RT3.js"),__vite__mapDeps([3,1,4])),meta:{guestOnly:!0}},{path:"/auth/forgot-password",name:"ForgotPassword",component:()=>l(()=>import("./ForgotPassword-BUyVE188.js"),__vite__mapDeps([5,1,6])),meta:{guestOnly:!0}},{path:"/auth/reset-password/:token",name:"ResetPassword",component:()=>l(()=>import("./ResetPassword-CzJ43_7z.js"),__vite__mapDeps([7,1,8])),meta:{guestOnly:!0}}],Ue=[{path:"/employee",component:()=>l(()=>import("./EmployeeLayout-CHFV4ISD.js"),__vite__mapDeps([9,10,1,11,12])),meta:{requiresAuth:!0,roles:["employee","manager","admin"]},children:[{path:"dashboard",name:"EmployeeDashboard",component:()=>l(()=>import("./Dashboard-BgzJt0_b.js"),__vite__mapDeps([13,1,14]))},{path:"attendance",name:"EmployeeAttendance",component:()=>l(()=>import("./Attendance-4iidTvic.js"),__vite__mapDeps([15,1,16]))},{path:"leaves",name:"EmployeeLeaves",component:()=>l(()=>import("./Leaves-BTNjC0mj.js"),__vite__mapDeps([17,1,18]))},{path:"apply-leave",name:"ApplyLeave",component:()=>l(()=>import("./ApplyLeave-BEQc9lkk.js"),__vite__mapDeps([19,1,20]))},{path:"payslips",name:"EmployeePayslips",component:()=>l(()=>import("./Payslips-DdJsD-vf.js"),__vite__mapDeps([21,1,22]))},{path:"profile",name:"EmployeeProfile",component:()=>l(()=>import("./Profile-DDYJzRYF.js"),__vite__mapDeps([23,1,24]))},{path:"tasks",name:"TaskBoard",component:()=>l(()=>import("./TaskAssigned-CfHWhVVS.js"),__vite__mapDeps([25,1,26,27,28])),meta:{requiresAuth:!0,roles:["employee","manager","admin"],title:"My Tasks"}}]}],ze=[{path:"/manager",component:()=>l(()=>import("./ManagerLayout-B3TzfuyL.js"),__vite__mapDeps([29,10,1,11,30])),meta:{requiresAuth:!0,roles:["manager","admin"]},children:[{path:"dashboard",name:"ManagerDashboard",component:()=>l(()=>import("./Dashboard-PAFY44p1.js"),__vite__mapDeps([31,1,32]))},{path:"employees",name:"EmployeeList",component:()=>l(()=>import("./EmployeeList-vWkGvpcH.js"),__vite__mapDeps([33,1,34]))},{path:"attendance",name:"AttendanceMonitor",component:()=>l(()=>import("./AttendanceMonitor-C54JZzwy.js"),__vite__mapDeps([35,1,36]))},{path:"leave-approvals",name:"LeaveApprovals",component:()=>l(()=>import("./LeaveApprovals-BWMK5_Ic.js"),__vite__mapDeps([37,1,38]))},{path:"reports",name:"TeamReports",component:()=>l(()=>import("./TeamReports-sBpWjEr0.js"),__vite__mapDeps([39,1,40]))},{path:"productivity",name:"ProductivityMonitor",component:()=>l(()=>import("./ProductivityMonitor-DmyGl7oB.js"),__vite__mapDeps([41,1,42]))},{path:"profile",name:"ManagerProfile",component:()=>l(()=>import("./Profile-BgwtBAgX.js"),__vite__mapDeps([43,1,44]))},{path:"payslips",name:"ManagerPayslips",component:()=>l(()=>import("./Payslips-DXpCHUQd.js"),__vite__mapDeps([45,1,46]))},{path:"tasks",name:"AssignTask",component:()=>l(()=>import("./TaskForm-BGnMBiXS.js"),__vite__mapDeps([47,1,26,27,48]))}]}],qe=[{path:"/admin",component:()=>l(()=>import("./AdminLayout-Dd6-XRln.js"),__vite__mapDeps([49,10,1,11,50])),meta:{requiresAuth:!0,roles:["admin"]},children:[{path:"",name:"AdminRoot",redirect:{name:"AdminDashboard"}},{path:"dashboard",name:"AdminDashboard",component:()=>l(()=>import("./Dashboard-b14tyY6Y.js"),__vite__mapDeps([51,1,52]))},{path:"employees",name:"EmployeeManagement",component:()=>l(()=>import("./EmployeeManagement-DU8C3i4p.js"),__vite__mapDeps([53,1,54]))},{path:"payroll",name:"PayrollProcessing",component:()=>l(()=>import("./PayrollProcessing-DCwczl99.js"),__vite__mapDeps([55,1,56]))},{path:"payslips",name:"PayslipGeneration",component:()=>l(()=>import("./PayslipGeneration-B4tEjZVK.js").then(e=>e.P),__vite__mapDeps([57,1,58]))},{path:"tax",name:"TaxConfiguration",component:()=>l(()=>import("./TaxConfiguration-pzCAgb3x.js"),__vite__mapDeps([59,1,60]))},{path:"reports",name:"AdminReports",component:()=>l(()=>import("./Reports-D25qNI0f.js"),__vite__mapDeps([61,1,62]))},{path:"profile",name:"AdminProfile",component:()=>l(()=>import("./Profile-BgwtBAgX.js"),__vite__mapDeps([43,1,44]))},{path:"audit-logs",name:"AuditLogs",component:()=>l(()=>import("./AuditLogs-3VQTTl1B.js"),__vite__mapDeps([63,1,64]))},{path:"leaves",name:"LeaveManagement",component:()=>l(()=>import("./LeaveManagement-CqJesQ5U.js"),__vite__mapDeps([65,1,66]))},{path:"attendance",name:"Attendancemonitor",component:()=>l(()=>import("./AttendanceMonitor-DL9P2v1z.js"),__vite__mapDeps([67,1,68]))},{path:"settings",name:"AdminSettings",component:()=>l(()=>import("./Settings-CLsvVPjk.js"),__vite__mapDeps([69,1,70]))}]}],Be=[{path:"/",redirect:"/auth"},{path:"/unauthorized",name:"Unauthorized",component:()=>l(()=>import("./Unauthorized-BcfKab7E.js"),__vite__mapDeps([71,1,72]))}],He=[...Be,...je,...Ue,...ze,...qe,{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>l(()=>import("./NotFound-OBVKhRGD.js"),__vite__mapDeps([73,1,74]))}],G=_e({history:ge("/"),routes:He});G.beforeEach((e,t,o)=>{var a,c;const r=S();if(e.meta.requiresAuth&&!r.isAuthenticated){o({name:"Login"});return}if(e.meta.roles&&!e.meta.roles.includes((a=r.user)==null?void 0:a.role)){o({name:"Unauthorized"});return}if(e.meta.guestOnly&&r.isAuthenticated){switch((c=r.user)==null?void 0:c.role){case"admin":o({name:"AdminDashboard"});break;case"manager":o({name:"ManagerDashboard"});break;default:o({name:"EmployeeDashboard"})}return}o()});const Ke="https://archangel.darth.cloud";P.defaults.baseURL=Ke;P.defaults.withCredentials=!0;const z=ye(Fe),Xe=Ee();z.use(Xe);z.use(G);z.use(xe);const Ye=async()=>{try{await P.get("/sanctum/csrf-cookie"),console.log("CSRF cookie fetched successfully")}catch(t){console.warn("Failed to fetch CSRF cookie:",t)}const e=S();P.interceptors.response.use(t=>{const o=S();return o.token&&o.user&&o.resetActivityTimer(),t},t=>{var r;const o=S();return((r=t.response)==null?void 0:r.status)===401&&(console.log("401 error received, clearing auth"),o.clearAuth(),window.location.pathname.includes("/login")||G.push({name:"login"})),Promise.reject(t)});try{await e.loadFromStorage(),console.log("App initialized, auth status:",e.isAuthenticated)}catch(t){console.error("Failed to load auth from storage:",t)}setInterval(()=>{e.token&&e.user&&!e.isTokenExpired()&&e.refreshSession()},30*60*1e3),z.mount("#app")};Ye();export{ke as _,l as a,S as u};
