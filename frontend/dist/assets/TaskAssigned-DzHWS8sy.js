import{_ as v,u as y}from"./index-C1X9tsoG.js";import{r as p,o as f,b as i,p as t,E as h,C as k,g as _,u as T,f as r}from"./vendor-Dn_KV7fh.js";import{T as x}from"./TaskBoard-B3S2y_Hb.js";const A={class:"employee-task-page"},w={key:0,class:"loading-container"},B={key:2,class:"empty-state"},E={__name:"TaskAssigned",setup(M){const g=y(),m=T(),o=p([]),n=p(!1);async function d(){var l,s,u,c;n.value=!0;try{const e=await _.get("/api/tasks"),a=e.data.tasks||e.data.data||e.data;o.value=Array.isArray(a)?a:[],console.log("Fetched tasks:",o.value.length,"tasks")}catch(e){console.error("Failed to fetch tasks:",e);let a="Failed to load your tasks. Please try again.";((l=e.response)==null?void 0:l.status)===401?(a="Session expired. Please login again.",g.clearAuth(),m.push("/login")):((s=e.response)==null?void 0:s.status)===403?a="You do not have permission to view tasks.":(c=(u=e.response)==null?void 0:u.data)!=null&&c.message&&(a=e.response.data.message),alert(`Error: ${a}`),o.value=[]}finally{n.value=!1}}return f(async()=>{await d()}),(l,s)=>(r(),i("div",A,[s[2]||(s[2]=t("div",{class:"page-header"},[t("h1",{class:"page-title"},"My Tasks ðŸ“‹"),t("p",{class:"page-description"},"View and manage your assigned tasks.")],-1)),n.value?(r(),i("div",w,[...s[0]||(s[0]=[t("div",{class:"spinner"},null,-1),t("p",{class:"loading-text"},"Loading tasks...",-1)])])):o.value.length>0?(r(),h(x,{key:1,tasks:o.value,"employee-view":!0,onTaskUpdated:d},null,8,["tasks"])):k("",!0),!n.value&&o.value.length===0?(r(),i("div",B,[...s[1]||(s[1]=[t("div",{class:"empty-icon"},"ðŸŽ‰",-1),t("p",{class:"empty-text"},"You have no tasks assigned at the moment. Enjoy the break!",-1)])])):k("",!0)]))}},b=v(E,[["__scopeId","data-v-538e4715"]]);export{b as default};
