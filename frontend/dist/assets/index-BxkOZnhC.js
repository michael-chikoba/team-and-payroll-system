const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-CFBLK4R7.js","assets/vendor-CFHPe_rb.js","assets/Login-3c47Kpas.css","assets/Register-OEIcGI4s.js","assets/Register-HnCMei_d.css","assets/ForgotPassword-CX_Aa2Ef.js","assets/ForgotPassword-JgkzK2KZ.css","assets/ResetPassword-9feSJLwE.js","assets/ResetPassword-BN1Ks_H0.css","assets/EmployeeLayout-BEi_zI28.js","assets/Toggle-Ck5ER8Z6.js","assets/Toggle-CQUmg5AM.css","assets/EmployeeLayout-DzqNRts7.css","assets/Dashboard-DVcNI6WM.js","assets/Dashboard-C-WeJMrP.css","assets/Attendance-BnbZo4q3.js","assets/Attendance-Dry_WsqK.css","assets/Leaves-ClbcFRaH.js","assets/Leaves-Ch2rLybm.css","assets/ApplyLeave-D1d0n9Jq.js","assets/ApplyLeave-CBtnfJsW.css","assets/Payslips-DQ0V6aks.js","assets/Payslips-CqdaKdp7.css","assets/Profile-pE9pVZvH.js","assets/Profile-DHldSkq0.css","assets/TaskAssigned-CPNIn9AH.js","assets/TaskBoard-CCY1dBxO.js","assets/TaskBoard-DrnGRv1W.css","assets/TaskAssigned-tou41XIT.css","assets/ManagerLayout-Dcn85CCS.js","assets/ManagerLayout-DtCJjM8X.css","assets/Dashboard-B_6zKCOc.js","assets/Dashboard-BTiWECj_.css","assets/EmployeeList-CR5NYaJ-.js","assets/EmployeeList-CpQNFk12.css","assets/AttendanceMonitor-Ct0Ev4Fk.js","assets/AttendanceMonitor-B-iA4kHx.css","assets/LeaveApprovals-6i-sCjFE.js","assets/LeaveApprovals-Da5SNGAG.css","assets/TeamReports-DCY23WHj.js","assets/TeamReports-BbLzrrkv.css","assets/ProductivityMonitor-Cj1OTZ5_.js","assets/ProductivityMonitor-BJ0LDHj_.css","assets/TaskForm-CP4IYOVX.js","assets/TaskForm-Cuy0iiZS.css","assets/AdminLayout-Dj9FzMEl.js","assets/AdminLayout-DAOZaWL_.css","assets/Dashboard-DPao4Q9G.js","assets/Dashboard-Dkkct8MS.css","assets/EmployeeManagement-BWxVStHC.js","assets/EmployeeManagement-CDqQyEuO.css","assets/PayrollProcessing-BjpngMR1.js","assets/PayrollProcessing-NeHc1d_N.css","assets/PayslipGeneration-BW_QcK7w.js","assets/PayslipGeneration-W1S7UiuM.css","assets/TaxConfiguration-B1m84SE-.js","assets/TaxConfiguration-DADUD8yl.css","assets/Reports-CRJG4vPU.js","assets/Reports-Cv8BsJG8.css","assets/AuditLogs-DPNaV1eu.js","assets/AuditLogs-BQqKf3l6.css","assets/LeaveManagement-DpVtwZ_0.js","assets/LeaveManagement-ChnAdVW0.css","assets/AttendanceMonitor-BQDD8mi0.js","assets/AttendanceMonitor-MfeX-qKM.css","assets/Settings-E0NUQth4.js","assets/Settings-D3Zlc7Ti.css","assets/Unauthorized-B_5nVNY8.js","assets/Unauthorized-CjVdvr7g.css","assets/NotFound-BMlCM8t-.js","assets/NotFound-DhzjMYmC.css"])))=>i.map(i=>d[i]);
import{d as se,r as C,c as w,o as le,a as _,T as ce,m as ue,F as ee,i as pe,b as de,e as me,f as fe,g as T,h as he,u as ve,j as _e,k as ge,l as ye,n as Ee}from"./vendor-CFHPe_rb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function o(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=o(a);fetch(a.href,l)}})();(function(){var e;try{if(typeof document<"u"){var t=document.createElement("style");t.nonce=(e=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:e.content,t.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:#fff;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44a4fc;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#e54d42;border-left-color:#b82e24}.vue-notification.success{background:#68cd86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(t)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();const re=new Map;function Ae(e){return{all:e=e||new Map,on:function(t,o){var r=e.get(t);r?r.push(o):e.set(t,[o])},off:function(t,o){var r=e.get(t);r&&(o?r.splice(r.indexOf(o)>>>0,1):e.set(t,[]))},emit:function(t,o){var r=e.get(t);r&&r.slice().map(function(a){a(o)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,o)})}}}const U=Ae(),W="[-+]?[0-9]*.?[0-9]+",te=[{name:"px",regexp:new RegExp(`^${W}px$`)},{name:"%",regexp:new RegExp(`^${W}%$`)},{name:"px",regexp:new RegExp(`^${W}$`)}],we=e=>{if(e==="auto")return{type:e,value:0};for(let t=0;t<te.length;t++){const o=te[t];if(o.regexp.test(e))return{type:o.name,value:parseFloat(e)}}return{type:"",value:e}},Te=e=>{switch(typeof e){case"number":return{type:"px",value:e};case"string":return we(e);default:return{type:"",value:e}}},oe={x:new Set(["left","center","right"]),y:new Set(["top","bottom"])},be=(e=>()=>e++)(0),Oe=e=>typeof e!="string"?[]:e.split(/\s+/gi).filter(Boolean),Re=e=>{typeof e=="string"&&(e=Oe(e));let t=null,o=null;return e.forEach(r=>{oe.y.has(r)&&(o=r),oe.x.has(r)&&(t=r)}),{x:t,y:o}},J={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:e=>({height:[e.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},Pe=(e,t)=>{let o,r,a=t;const l=()=>{r=Date.now(),o=setTimeout(e,a)},u=()=>{clearTimeout(o),a-=Date.now()-r};return l(),{start:l,stop:u}};function Le(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!pe(e)}const M={IDLE:0,DESTROYED:2},Ie=se({name:"notifications",props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:()=>J.position},classes:{type:[String,Array],default:"vue-notification"},animationType:{type:String,default:"css",validator(e){return e==="css"||e==="velocity"}},animation:{type:Object,default(){return J.velocityAnimation}},animationName:{type:String,default:J.cssAnimation},speed:{type:Number,default:300},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1},dangerouslySetInnerHtml:{type:Boolean,default:!1}},emits:{click:e=>!0,destroy:e=>!0,start:e=>!0},slots:Object,setup:(e,{emit:t,slots:o,expose:r})=>{const a=C([]),l=re.get("velocity"),u=w(()=>e.animationType==="velocity"),d=w(()=>a.value.filter(n=>n.state!==M.DESTROYED)),f=w(()=>Te(e.width)),b=w(()=>{const{x:n,y:i}=Re(e.position),m=f.value.value,v=f.value.type,A={width:m+v};return i&&(A[i]="0px"),n&&(n==="center"?A.left=`calc(50% - ${+m/2}${v})`:A[n]="0px"),A}),x=w(()=>u.value?{onEnter:B,onLeave:V,onAfterLeave:E}:{}),h=n=>{t("click",n),e.closeOnClick&&O(n)},g=n=>{var i;e.pauseOnHover&&((i=n.timer)==null||i.stop())},y=n=>{var i;e.pauseOnHover&&((i=n.timer)==null||i.start())},k=(n={})=>{if(n.group||(n.group=""),n.data||(n.data={}),e.group!==n.group)return;if(n.clean||n.clear){q();return}const i=typeof n.duration=="number"?n.duration:e.duration,m=typeof n.speed=="number"?n.speed:e.speed,v=typeof n.ignoreDuplicates=="boolean"?n.ignoreDuplicates:e.ignoreDuplicates,{title:A,text:H,type:K,data:X,id:s}=n,p={id:s||be(),title:A,text:H,type:K,state:M.IDLE,speed:m,length:i+2*m,data:X,duplicates:0};i>=0&&(p.timer=Pe(()=>O(p),p.length));const R="bottom"in b.value,Y=e.reverse?!R:R;let j=-1;const Q=d.value.find(Z=>Z.title===n.title&&Z.text===n.text);if(v&&Q){Q.duplicates++;return}Y?(a.value.push(p),t("start",p),d.value.length>e.max&&(j=0)):(a.value.unshift(p),t("start",p),d.value.length>e.max&&(j=d.value.length-1)),j!==-1&&O(d.value[j])},N=n=>{$(n)},D=n=>["vue-notification-template",e.classes,n.type||""],F=n=>u.value?void 0:{transition:`all ${n.speed}ms`},O=n=>{var i;(i=n.timer)==null||i.stop(),n.state=M.DESTROYED,E(),t("destroy",n)},$=n=>{const i=a.value.find(m=>m.id===n);i&&O(i)},q=()=>{d.value.forEach(O)},L=(n,i)=>{var m;const v=(m=e.animation)==null?void 0:m[n];return typeof v=="function"?v(i):v},B=(n,i)=>{const m=L("enter",n);l(n,m,{duration:e.speed,complete:i})},V=(n,i)=>{const m=L("leave",n);l(n,m,{duration:e.speed,complete:i})};function E(){a.value=a.value.filter(n=>n.state!==M.DESTROYED)}return le(()=>{U.on("add",k),U.on("close",N)}),()=>{let n;return _("div",{class:"vue-notification-group",style:b.value},[_(ce,ue(x.value,{tag:"div",css:!u.value,name:e.animationName}),Le(n=d.value.map(i=>_("div",{key:i.id,class:"vue-notification-wrapper",style:F(i),"data-id":i.id,onMouseenter:()=>g(i),onMouseleave:()=>y(i)},[o.body?o.body({item:i,class:[e.classes,i.type],close:()=>O(i)}):_("div",{class:D(i),onClick:()=>h(i)},[e.dangerouslySetInnerHtml?_(ee,null,[i.title?_("div",{class:"notification-title",innerHTML:i.title},null):null,_("div",{class:"notification-content",innerHTML:i.text},null)]):_(ee,null,[i.title?_("div",{class:"notification-title"},[i.title]):null,_("div",{class:"notification-content"},[i.text])])])])))?n:{default:()=>[n]})])}}}),ae=e=>{typeof e=="string"&&(e={title:"",text:e}),typeof e=="object"&&U.emit("add",e)};ae.close=e=>{U.emit("close",e)};const Se="Notifications";function xe(e,t={}){Object.entries(t).forEach(r=>re.set(...r));const o=t.name||"notify";e.config.globalProperties["$"+o]=ae,e.component(t.componentName||Se,Ie)}const ke={install:xe},De=(e,t)=>{const o=e.__vccOpts||e;for(const[r,a]of t)o[r]=a;return o},Ve={name:"App",created(){console.log("App initialized successfully")}},Ce={id:"app"};function Ne(e,t,o,r,a,l){const u=me("router-view");return fe(),de("div",Ce,[_(u)])}const Fe=De(Ve,[["render",Ne]]),$e="modulepreload",je=function(e){return"/"+e},ne={},c=function(t,o,r){let a=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(o.map(f=>{if(f=je(f),f in ne)return;ne[f]=!0;const b=f.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${x}`))return;const h=document.createElement("link");if(h.rel=b?"stylesheet":$e,b||(h.as="script"),h.crossOrigin="",h.href=f,d&&h.setAttribute("nonce",d),document.head.appendChild(h),b)return new Promise((g,y)=>{h.addEventListener("load",g),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return a.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})},ie="https://archangel.darth.cloud",P=T.create({baseURL:`${ie}/api`,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});P.interceptors.request.use(async e=>{var o,r;const t=S();if(t.token&&(e.headers.Authorization=`Bearer ${t.token}`),["post","put","patch","delete"].includes((o=e.method)==null?void 0:o.toLowerCase())){document.cookie.includes("XSRF-TOKEN")||await T.get(`${ie}/sanctum/csrf-cookie`,{withCredentials:!0});const a=(r=document.cookie.split("; ").find(l=>l.startsWith("XSRF-TOKEN=")))==null?void 0:r.split("=")[1];a&&(e.headers["X-XSRF-TOKEN"]=decodeURIComponent(a))}return e},e=>Promise.reject(e));P.interceptors.response.use(e=>e,e=>{var t,o,r,a;return((t=e.response)==null?void 0:t.status)===401&&(S().clearAuth(),window.location.href="/login"),((o=e.response)==null?void 0:o.status)===419&&(document.cookie.split(";").forEach(l=>{document.cookie=l.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),console.error("CSRF token mismatch. Please refresh and try again.")),((r=e.response)==null?void 0:r.status)===403&&console.error("Access forbidden:",e.response.data.message),((a=e.response)==null?void 0:a.status)===500&&console.error("Server error. Please try again later."),Promise.reject(e)});const I={login(e){return P.post("/login",e)},register(e){return P.post("/register",e)},logout(){return P.post("/logout")},getUser(){return P.get("/user")},forgotPassword(e){return P.post("/forgot-password",e)},resetPassword(e){return P.post("/reset-password",e)}},S=he("auth",()=>{const e=ve(),t=C(null),o=C(localStorage.getItem("token")),r=C(localStorage.getItem("tokenExpiry")),a=C(!1),l=w(()=>!!o.value&&!!t.value&&!k()),u=w(()=>{var s;return(s=t.value)==null?void 0:s.role}),d=w(()=>u.value==="admin"),f=w(()=>u.value==="manager"),b=w(()=>u.value==="employee"),x=24*60*60*1e3,h=2*60*60*1e3;let g=null,y=null;function k(){return r.value?Date.now()>parseInt(r.value):!1}function N(){const s=Date.now()+x;r.value=s.toString(),localStorage.setItem("tokenExpiry",r.value)}function D(){g&&clearTimeout(g),l.value&&(g=setTimeout(()=>{console.log("Auto-logout due to inactivity"),v()},h))}function F(){const s=["mousedown","keydown","scroll","touchstart","click"],p=()=>{l.value&&D()};s.forEach(R=>{window.addEventListener(R,p,{passive:!0})}),D()}function O(){g&&(clearTimeout(g),g=null)}function $(){y&&clearInterval(y),y=setInterval(()=>{k()&&(console.log("Token expired, logging out"),v())},60*1e3)}function q(){y&&(clearInterval(y),y=null)}function L(s){s?(T.defaults.headers.common.Authorization=`Bearer ${s}`,T.defaults.headers.common.Accept="application/json",T.defaults.headers.common["Content-Type"]="application/json"):delete T.defaults.headers.common.Authorization}async function B(){const s=localStorage.getItem("token"),p=localStorage.getItem("user"),R=localStorage.getItem("tokenExpiry");if(s&&p&&R){if(Date.now()>parseInt(R)){console.log("Stored token expired, clearing auth"),E();return}try{o.value=s,r.value=R,t.value=JSON.parse(p),L(o.value),F(),$(),await A(),console.log("Auth state restored successfully")}catch(Y){console.error("Failed to restore auth state:",Y),E()}}}function V(s,p){t.value=s,o.value=p,localStorage.setItem("token",p),localStorage.setItem("user",JSON.stringify(s)),N(),L(p),F(),$()}function E(){t.value=null,o.value=null,r.value=null,localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("tokenExpiry"),L(null),O(),q()}function n(s){return t.value?Array.isArray(s)?s.includes(t.value.role):t.value.role===s:!1}async function i(s){try{a.value=!0;const p=await I.login(s);return V(p.data.user,p.data.token),p}catch(p){throw E(),p}finally{a.value=!1}}async function m(s){try{a.value=!0;const p=await I.register(s);return V(p.data.user,p.data.token),p}catch(p){throw E(),p}finally{a.value=!1}}async function v(){try{await I.logout()}catch(s){console.error("Logout error:",s)}finally{E(),e.push({name:"login"})}}async function A(){if(o.value)try{const s=await I.getUser();t.value=s.data.user,localStorage.setItem("user",JSON.stringify(t.value)),N()}catch(s){throw E(),s}}async function H(s){return await I.forgotPassword({email:s})}async function K(s){return await I.resetPassword(s)}async function X(){if(l.value)try{await A(),console.log("Session refreshed")}catch(s){console.error("Failed to refresh session:",s)}}return o.value&&L(o.value),{user:t,token:o,tokenExpiry:r,isLoading:a,isAuthenticated:l,userRole:u,isAdmin:d,isManager:f,isEmployee:b,setAuth:V,clearAuth:E,hasRole:n,login:i,register:m,logout:v,fetchUser:A,forgotPassword:H,resetPassword:K,loadFromStorage:B,refreshSession:X,resetActivityTimer:D,isTokenExpired:k}}),Me=[{path:"/auth",name:"AuthHome",redirect:"/auth/login",meta:{guestOnly:!0}},{path:"/auth/login",name:"Login",component:()=>c(()=>import("./Login-CFBLK4R7.js"),__vite__mapDeps([0,1,2])),meta:{guestOnly:!0}},{path:"/auth/register",name:"Register",component:()=>c(()=>import("./Register-OEIcGI4s.js"),__vite__mapDeps([3,1,4])),meta:{guestOnly:!0}},{path:"/auth/forgot-password",name:"ForgotPassword",component:()=>c(()=>import("./ForgotPassword-CX_Aa2Ef.js"),__vite__mapDeps([5,1,6])),meta:{guestOnly:!0}},{path:"/auth/reset-password/:token",name:"ResetPassword",component:()=>c(()=>import("./ResetPassword-9feSJLwE.js"),__vite__mapDeps([7,1,8])),meta:{guestOnly:!0}}],Ue=[{path:"/employee",component:()=>c(()=>import("./EmployeeLayout-BEi_zI28.js"),__vite__mapDeps([9,10,1,11,12])),meta:{requiresAuth:!0,roles:["employee","manager","admin"]},children:[{path:"dashboard",name:"EmployeeDashboard",component:()=>c(()=>import("./Dashboard-DVcNI6WM.js"),__vite__mapDeps([13,1,14]))},{path:"attendance",name:"EmployeeAttendance",component:()=>c(()=>import("./Attendance-BnbZo4q3.js"),__vite__mapDeps([15,1,16]))},{path:"leaves",name:"EmployeeLeaves",component:()=>c(()=>import("./Leaves-ClbcFRaH.js"),__vite__mapDeps([17,1,18]))},{path:"apply-leave",name:"ApplyLeave",component:()=>c(()=>import("./ApplyLeave-D1d0n9Jq.js"),__vite__mapDeps([19,1,20]))},{path:"payslips",name:"EmployeePayslips",component:()=>c(()=>import("./Payslips-DQ0V6aks.js"),__vite__mapDeps([21,1,22]))},{path:"profile",name:"EmployeeProfile",component:()=>c(()=>import("./Profile-pE9pVZvH.js"),__vite__mapDeps([23,1,24]))},{path:"tasks",name:"TaskBoard",component:()=>c(()=>import("./TaskAssigned-CPNIn9AH.js"),__vite__mapDeps([25,1,26,27,28])),meta:{requiresAuth:!0,roles:["employee","manager","admin"],title:"My Tasks"}}]}],ze=[{path:"/manager",component:()=>c(()=>import("./ManagerLayout-Dcn85CCS.js"),__vite__mapDeps([29,10,1,11,30])),meta:{requiresAuth:!0,roles:["manager","admin"]},children:[{path:"dashboard",name:"ManagerDashboard",component:()=>c(()=>import("./Dashboard-B_6zKCOc.js"),__vite__mapDeps([31,1,32]))},{path:"employees",name:"EmployeeList",component:()=>c(()=>import("./EmployeeList-CR5NYaJ-.js"),__vite__mapDeps([33,1,34]))},{path:"attendance",name:"AttendanceMonitor",component:()=>c(()=>import("./AttendanceMonitor-Ct0Ev4Fk.js"),__vite__mapDeps([35,1,36]))},{path:"leave-approvals",name:"LeaveApprovals",component:()=>c(()=>import("./LeaveApprovals-6i-sCjFE.js"),__vite__mapDeps([37,1,38]))},{path:"reports",name:"TeamReports",component:()=>c(()=>import("./TeamReports-DCY23WHj.js"),__vite__mapDeps([39,1,40]))},{path:"productivity",name:"ProductivityMonitor",component:()=>c(()=>import("./ProductivityMonitor-Cj1OTZ5_.js"),__vite__mapDeps([41,1,42]))},{path:"tasks",name:"AssignTask",component:()=>c(()=>import("./TaskForm-CP4IYOVX.js"),__vite__mapDeps([43,1,26,27,44]))}]}],qe=[{path:"/admin",component:()=>c(()=>import("./AdminLayout-Dj9FzMEl.js"),__vite__mapDeps([45,10,1,11,46])),meta:{requiresAuth:!0,roles:["admin"]},children:[{path:"",name:"AdminRoot",redirect:{name:"AdminDashboard"}},{path:"dashboard",name:"AdminDashboard",component:()=>c(()=>import("./Dashboard-DPao4Q9G.js"),__vite__mapDeps([47,1,48]))},{path:"employees",name:"EmployeeManagement",component:()=>c(()=>import("./EmployeeManagement-BWxVStHC.js"),__vite__mapDeps([49,1,50]))},{path:"payroll",name:"PayrollProcessing",component:()=>c(()=>import("./PayrollProcessing-BjpngMR1.js"),__vite__mapDeps([51,1,52]))},{path:"payslips",name:"PayslipGeneration",component:()=>c(()=>import("./PayslipGeneration-BW_QcK7w.js").then(e=>e.P),__vite__mapDeps([53,1,54]))},{path:"tax",name:"TaxConfiguration",component:()=>c(()=>import("./TaxConfiguration-B1m84SE-.js"),__vite__mapDeps([55,1,56]))},{path:"reports",name:"AdminReports",component:()=>c(()=>import("./Reports-CRJG4vPU.js"),__vite__mapDeps([57,1,58]))},{path:"audit-logs",name:"AuditLogs",component:()=>c(()=>import("./AuditLogs-DPNaV1eu.js"),__vite__mapDeps([59,1,60]))},{path:"leaves",name:"LeaveManagement",component:()=>c(()=>import("./LeaveManagement-DpVtwZ_0.js"),__vite__mapDeps([61,1,62]))},{path:"attendance",name:"Attendancemonitor",component:()=>c(()=>import("./AttendanceMonitor-BQDD8mi0.js"),__vite__mapDeps([63,1,64]))},{path:"settings",name:"AdminSettings",component:()=>c(()=>import("./Settings-E0NUQth4.js"),__vite__mapDeps([65,1,66]))}]}],Be=[{path:"/",redirect:"/auth"},{path:"/unauthorized",name:"Unauthorized",component:()=>c(()=>import("./Unauthorized-B_5nVNY8.js"),__vite__mapDeps([67,1,68]))}],He=[...Be,...Me,...Ue,...ze,...qe,{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>c(()=>import("./NotFound-BMlCM8t-.js"),__vite__mapDeps([69,1,70]))}],G=_e({history:ge("/"),routes:He});G.beforeEach((e,t,o)=>{var a,l;const r=S();if(e.meta.requiresAuth&&!r.isAuthenticated){o({name:"Login"});return}if(e.meta.roles&&!e.meta.roles.includes((a=r.user)==null?void 0:a.role)){o({name:"Unauthorized"});return}if(e.meta.guestOnly&&r.isAuthenticated){switch((l=r.user)==null?void 0:l.role){case"admin":o({name:"AdminDashboard"});break;case"manager":o({name:"ManagerDashboard"});break;default:o({name:"EmployeeDashboard"})}return}o()});const Ke="https://archangel.darth.cloud";T.defaults.baseURL=Ke;T.defaults.withCredentials=!0;const z=ye(Fe),Xe=Ee();z.use(Xe);z.use(G);z.use(ke);const Ye=async()=>{try{await T.get("/sanctum/csrf-cookie"),console.log("CSRF cookie fetched successfully")}catch(t){console.warn("Failed to fetch CSRF cookie:",t)}const e=S();T.interceptors.response.use(t=>{const o=S();return o.token&&o.user&&o.resetActivityTimer(),t},t=>{var r;const o=S();return((r=t.response)==null?void 0:r.status)===401&&(console.log("401 error received, clearing auth"),o.clearAuth(),window.location.pathname.includes("/login")||G.push({name:"login"})),Promise.reject(t)});try{await e.loadFromStorage(),console.log("App initialized, auth status:",e.isAuthenticated)}catch(t){console.error("Failed to load auth from storage:",t)}setInterval(()=>{e.token&&e.user&&!e.isTokenExpired()&&e.refreshSession()},30*60*1e3),z.mount("#app")};Ye();export{De as _,c as a,S as u};
